import pytest
from datetime import datetime

from src.application.dto import PriceDTO
from src.domain.entities import Price
from src.infrastructure.database.models import ORMPrice

@pytest.fixture
def price_dto():
    '''–§–∏–∫—Å—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ Price DTO'''
    return PriceDTO(
        id=None,  # üî• None
        product_id='p1',
        with_card=100,
        without_card=120,
        previous_with_card=90,
        previous_without_card=110,
        created_at=datetime(2025, 1, 1),  #
    )

@pytest.fixture
def price():
    '''Price –¥–ª—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ (–µ—â—ë –Ω–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –ë–î).'''
    return Price(
        id=None,  # üî• None –¥–æ –≤—Å—Ç–∞–≤–∫–∏ –≤ –ë–î
        product_id='p1',
        with_card=100,
        without_card=120,
        previous_with_card=90,
        previous_without_card=110,
        created_at=datetime(2025, 1, 1),  
    )

@pytest.fixture
def price_second():
    '''–§–∏–∫—Å—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ Price'''
    return Price(
        id=None,  # üî• —Ç–æ–∂–µ None
        product_id='p1',
        with_card=120,
        without_card=140,
        previous_with_card=100,    
        previous_without_card=120,
        created_at=datetime(2025, 1, 2)
    )

@pytest.fixture
def orm_price():
    '''–§–∏–∫—Å—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ ORM Price'''
    return ORMPrice(
        id=1,  # –≤ –ë–î —É–∂–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω ‚Üí id –µ—Å—Ç—å
        product_id='p1',
        with_card=100,
        without_card=120,
        previous_with_card=90,
        previous_without_card=110,
        created_at=datetime(2025, 1, 1),
    )