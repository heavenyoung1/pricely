# 📉 Pricely

┌──────────────────────────┐
│  Внешний мир (Telegram)  │
└─────────────┬────────────┘
              │ JSON / FormData
              ▼
┌──────────────────────────┐
│     DTO (Pydantic)       │ ← Валидация входных данных
└─────────────┬────────────┘
              │ dto_to_entity()
              ▼
┌──────────────────────────┐
│   Domain Entities         │ ← Чистые классы бизнес-логики
└─────────────┬────────────┘
              │ передаём в UseCase
              ▼
┌──────────────────────────┐
│   UseCases                │ ← Бизнес-правила
└─────────────┬────────────┘
              │ вызывает
              ▼
┌──────────────────────────┐
│ Repository Interfaces    │ ← Контракты (сигнатуры методов)
└─────────────┬────────────┘
              │ реализуются в
              ▼
┌──────────────────────────┐
│ Repository Implementations│ ← SQLAlchemy, файлы, API
└─────────────┬────────────┘
              │ entity_to_orm()
              ▼
┌──────────────────────────┐
│ ORM модели (SQLAlchemy)  │ ← Таблицы и поля БД
└─────────────┬────────────┘
              │ session.commit()
              ▼
┌──────────────────────────┐
│        База данных       │
└──────────────────────────┘
-----------------------
Controller / Handler (например, FastAPI endpoint)
        │
        ▼
   ProductService
        │
   ┌────┴────────────────────────────┐
   │ Открывает UnitOfWork             │
   │ Создаёт репозитории              │
   │ Запускает UseCase                │
   └──────────────────────────────────┘
        │
        ▼
  CreateProductUseCase
        │
  ┌─────┴─────────────────────────────┐
  │ Сохраняет в репозитории            │
  │ Проверяет бизнес-правила           │
  │ Обновляет сущности                 │
  └────────────────────────────────────┘
        │
        ▼
 Реализация репозиториев (SQLAlchemy, API, файл и т.д.)