# üìâ Pricely

    Telegram-–±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –Ω–∞ —Ç–æ–≤–∞—Ä—ã Ozon.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Domain-Driven Design (DDD), –ø–∞—Ç—Ç–µ—Ä–Ω Unit of Work, –∏ —á–∏—Å—Ç—ã–π Dependency Injection –±–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–∏–Ω–≥–ª—Ç–æ–Ω–æ–≤.

## üß† –û–ø–∏—Å–∞–Ω–∏–µ

**Pricely** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

- –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã –ø–æ —Å—Å—ã–ª–∫–µ —Å Ozon,

- –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ü–µ–Ω—ã,

- –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏.

–í –æ—Å–Ω–æ–≤–µ ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–ª–æ—ë–≤:

- Domain Layer ‚Äî –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞;

- Application Layer ‚Äî Use Cases;

- Infrastructure Layer ‚Äî SQLAlchemy, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –ø–∞—Ä—Å–µ—Ä, —Å–µ—Ä–≤–∏—Å—ã;

- Presentation Layer ‚Äî Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Aiogram).

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ —Å—Å—ã–ª–∫–µ Ozon\
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç\
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã\
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤\
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞\
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostgreSQL\
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ Unit of Work\
‚úÖ –ß–∏—Å—Ç–∞—è Dependency Injection –±–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤\

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                             |
| ----------------- | ------------------------------------------------------ |
| –Ø–∑—ã–∫              | Python 3.13                                            |
| Telegram Bot      | Aiogram 3                                              |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö       | PostgreSQL                                             |
| ORM               | SQLAlchemy 2.x                                         |
| –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á | APScheduler                                            |
| –ü–∞—Ä—Å–µ—Ä            | Selenium                                               |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ       | logging                                                |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞       | Domain-Driven Design, Unit of Work, Repository Pattern |

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/heavenyoung1/pricely
cd pricely
uv sync
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª .env.example –≤ .env

```bash
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ *–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è* –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π `sudo nano .env`.

–ü–æ–¥–Ω—è—Ç—å –ë–∞–∑—É –î–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ docker-compose.
–í —Ñ–∞–π–ª–µ `docker-compose.yml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`pricely_db` –∏ `pricely_test_db`). –ß—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash 
docker-compose up -d
```

–≠—Ç–æ –ø–æ–¥–Ω–∏–º–µ—Ç –æ–±–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker ps
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∫ –ë–î. –ú–æ–∂–Ω–æ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ `pricely_db` –∏ `pricely_test_db` –∫–æ–º–∞–Ω–¥–∞–º–∏:

```bash
make migrate-dev     # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ dev –ë–î
make migrate-test    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ test –ë–î
```

–õ–∏–±–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –∫ **–¥–≤—É–º –ë–î** –∫–æ–º–∞–Ω–¥–æ–π:
```bash
make migrate-all     # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –æ–±–µ –ë–î
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:

```bash
ALEMBIC_DATABASE_URL=$(uv run python scripts/db_url.py dev) uv run alembic upgrade head
INFO  [alembic.runtime.migration] –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π ALEMBIC_DATABASE_URL: postgresql://postgres:1234@192.168.154.121:5432/pricely_db
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
ALEMBIC_DATABASE_URL=$(uv run python scripts/db_url.py test) uv run alembic upgrade head
INFO  [alembic.runtime.migration] –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π ALEMBIC_DATABASE_URL: postgresql://postgres:1234@192.168.154.121:5433/pricely_test_db
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
–ú–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –æ–±–µ–∏–º –ë–î
```

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –∏ –≤—ã–≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:


```bash
make tests
```

## üîÑ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: