2025-09-05 11:21:04,800 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 11:21:04,806 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 11:26:39,663 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:28:23,388 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:28:23,391 - src.application.use_cases.get_product - WARNING - Продукт NOT_EXIST_ID не найден
2025-09-05 11:28:41,688 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:28:41,692 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:29:47,937 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:29:47,939 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:30:06,776 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:30:06,780 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:30:29,617 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:30:29,620 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:31:18,439 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:31:18,444 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:31:36,382 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:31:36,384 - src.application.use_cases.get_product - WARNING - Продукт product.id не найден
2025-09-05 11:32:01,387 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 11:32:01,389 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 11:41:40,464 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 11:41:40,466 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 11:41:40,466 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 11:41:40,466 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 11:42:59,719 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 11:42:59,720 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 11:42:59,720 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 11:42:59,721 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 11:44:12,397 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 11:44:12,399 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 11:44:12,400 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 11:44:12,400 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 11:44:22,859 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 11:44:22,860 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 11:44:22,861 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 11:44:22,861 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 11:44:22,867 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 11:44:52,353 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 11:44:52,353 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 11:44:52,354 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 11:44:52,354 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 11:44:52,359 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:04:52,310 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x0000026138EBC550>
2025-09-05 14:04:52,314 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:04:52,315 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:04:52,316 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x0000026138EBC550>
2025-09-05 14:04:52,318 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:04:52,319 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:04:52,319 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:04:52,319 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:04:52,322 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:04:52,323 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:04:52,328 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:04:52,329 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:04:52,333 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:04:52,334 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:04:52,337 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:04:52,337 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:04:52,340 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:04:52,342 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:04:52,351 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:04:52,353 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:04:52,358 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:04:52,361 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:04:52,366 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:04:52,367 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:04:52,370 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:04:52,370 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:04:52,378 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:04:52,379 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:04:52,380 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:04:52,380 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:04:52,381 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:04:52,381 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '9f0d124e-008f-4dc0-a338-bc33fd63642a'}
2025-09-05 14:04:52,386 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:04:52,386 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:04:52,387 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:04:52,393 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:04:52,394 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:04:52,394 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:04:52,397 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:04:52,400 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:04:52,403 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:04:52,404 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:04:52,405 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:04:52,405 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:04:52,411 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:04:52,415 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:04:52,419 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:04:52,422 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:04:52,427 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:04:52,429 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:04:52,431 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:04:52,432 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:04:52,432 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:04:52,436 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:04:52,439 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:04:52,443 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:04:52,444 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:04:52,446 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:04:52,448 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:06:03,077 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001F4C9C2C550>
2025-09-05 14:06:03,080 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:06:03,082 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:06:03,082 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001F4C9C2C550>
2025-09-05 14:06:03,086 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:06:03,087 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:06:03,087 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:06:03,087 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:06:03,090 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:06:03,091 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:06:03,094 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:06:03,094 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:06:03,098 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:06:03,101 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:06:03,105 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:06:03,105 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:06:03,110 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:06:03,111 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:06:03,119 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:06:03,120 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:06:03,126 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:06:03,130 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:06:03,134 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:06:03,135 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:06:03,138 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:06:03,139 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:06:03,144 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:03,145 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:06:03,145 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:06:03,146 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:06:03,148 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:06:03,149 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '00ed7d19-88e8-47c6-9e6c-dcd97311f3d3'}
2025-09-05 14:06:03,155 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:03,157 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:06:03,158 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:06:03,165 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:03,166 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:06:03,167 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:06:03,171 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:06:03,176 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:06:03,181 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:06:03,182 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:06:03,183 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:06:03,183 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:06:03,192 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:06:03,196 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:06:03,202 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:06:03,209 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:06:03,212 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:06:03,216 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:03,219 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:06:03,219 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:06:03,220 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:06:03,225 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:03,228 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:06:03,237 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:03,242 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:06:03,245 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:03,250 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:06:38,114 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x00000243FC168550>
2025-09-05 14:06:38,116 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:06:38,117 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:06:38,117 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x00000243FC168550>
2025-09-05 14:06:38,121 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:06:38,124 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:06:38,125 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:06:38,125 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:06:38,130 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:06:38,130 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:06:38,133 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:06:38,134 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:06:38,141 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:06:38,141 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:06:38,144 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:06:38,145 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:06:38,148 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:06:38,149 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:06:38,151 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:06:38,152 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:06:38,160 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:06:38,163 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:06:38,165 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:06:38,166 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:06:38,168 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:06:38,169 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:06:38,175 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:38,176 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:06:38,176 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:06:38,177 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:06:38,177 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:06:38,178 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': 'c694cc96-2116-4eb4-8f13-46ade544d43d'}
2025-09-05 14:06:38,181 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:38,182 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:06:38,182 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:06:38,188 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:06:38,189 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:06:38,191 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:06:38,195 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:06:38,199 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:06:38,204 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:06:38,206 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:06:38,208 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:06:38,209 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:06:38,212 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:06:38,219 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:06:38,228 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:06:38,234 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:06:38,238 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:06:38,242 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:38,244 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:06:38,248 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:06:38,250 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:06:38,257 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:38,259 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:06:38,263 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:38,267 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:06:38,269 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:06:38,272 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:07:25,131 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000002A2A829C550>
2025-09-05 14:07:25,137 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:07:25,138 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:07:25,139 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000002A2A829C550>
2025-09-05 14:07:25,143 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:07:25,145 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:07:25,146 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:07:25,148 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:07:25,154 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:07:25,154 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:07:25,158 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:07:25,159 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:07:25,163 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:07:25,166 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:07:25,170 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:07:25,170 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:07:25,173 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:07:25,174 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:07:25,176 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:07:25,176 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:07:25,184 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:07:25,186 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:07:25,188 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:07:25,189 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:07:25,191 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:07:25,191 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:07:25,196 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:25,199 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:07:25,200 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:07:25,201 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:07:25,202 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:07:25,202 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '1a8114e3-3435-4dba-b112-93de2a23dd71'}
2025-09-05 14:07:25,206 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:25,207 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:07:25,208 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:07:25,216 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:25,217 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:07:25,218 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:07:25,221 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:07:25,224 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:07:25,235 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:07:25,240 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:07:25,241 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:07:25,242 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:07:25,249 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:07:25,260 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:07:25,270 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:07:25,276 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:07:25,283 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:07:25,285 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:25,288 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:07:25,289 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:07:25,289 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:07:25,293 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:25,297 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:07:25,300 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:25,302 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:07:25,304 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:25,305 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:07:48,855 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001A4F6B70550>
2025-09-05 14:07:48,856 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:07:48,857 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:07:48,857 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001A4F6B70550>
2025-09-05 14:07:48,859 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:07:48,859 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:07:48,860 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:07:48,860 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:07:48,863 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:07:48,863 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:07:48,865 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:07:48,866 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:07:48,871 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:07:48,872 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:07:48,874 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:07:48,874 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:07:48,876 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:07:48,876 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:07:48,879 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:07:48,879 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:07:48,883 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:07:48,886 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:07:48,888 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:07:48,889 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:07:48,891 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:07:48,891 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:07:48,895 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:48,895 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:07:48,896 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:07:48,896 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:07:48,897 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:07:48,897 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '4af48dd2-4e2c-4539-9148-9ce0e07f97b4'}
2025-09-05 14:07:48,903 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:48,904 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:07:48,904 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:07:48,909 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:07:48,909 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:07:48,910 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:07:48,913 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:07:48,916 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:07:48,923 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:07:48,924 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:07:48,925 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:07:48,925 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:07:48,930 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:07:48,935 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:07:48,941 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:07:48,943 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:07:48,946 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:07:48,947 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:48,950 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:07:48,951 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:07:48,951 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:07:48,955 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:48,957 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:07:48,959 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:48,961 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:07:48,963 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:07:48,965 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:08:08,455 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001AAFF80C690>
2025-09-05 14:08:08,457 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:08:08,457 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:08:08,458 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001AAFF80C690>
2025-09-05 14:08:08,459 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:08:08,460 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:08:08,460 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:08:08,461 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:08:08,463 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:08:08,464 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:08:08,468 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:08:08,471 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:08:08,474 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:08:08,475 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:08:08,479 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:08:08,481 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:08:08,487 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:08:08,488 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:08:08,494 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:08:08,495 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:08:08,502 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:08:08,504 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:08:08,507 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:08:08,508 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:08:08,511 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:08:08,511 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:08:08,515 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:08,516 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:08:08,516 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:08:08,517 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:08:08,517 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:08:08,518 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': 'a2c3c6cc-eb00-43a6-bf41-c2511dac0b39'}
2025-09-05 14:08:08,521 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:08,522 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:08:08,522 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:08:08,527 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:08,528 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:08:08,528 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:08:08,531 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:08:08,535 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:08:08,539 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:08:08,539 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:08:08,540 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:08:08,540 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:08:08,545 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:08:08,549 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:08:08,553 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:08:08,557 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:08:08,560 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:08:08,562 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:08,565 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:08:08,565 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:08:08,566 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:08:08,569 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:08,571 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:08:08,573 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:08,575 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:08:08,577 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:08,579 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:08:30,727 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x0000023914A9C690>
2025-09-05 14:08:30,730 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:08:30,731 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:08:30,731 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x0000023914A9C690>
2025-09-05 14:08:30,733 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:08:30,734 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:08:30,735 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:08:30,735 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:08:30,740 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:08:30,740 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:08:30,743 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:08:30,743 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:08:30,746 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:08:30,746 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:08:30,749 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:08:30,750 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:08:30,754 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:08:30,755 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:08:30,757 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:08:30,758 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:08:30,761 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:08:30,763 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:08:30,765 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:08:30,766 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:08:30,770 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:08:30,770 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:08:30,774 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:30,775 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:08:30,775 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:08:30,775 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:08:30,776 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:08:30,776 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '7b6a8a94-8ab0-4b7f-a58d-0110025e7f4b'}
2025-09-05 14:08:30,780 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:30,781 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:08:30,782 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:08:30,788 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:08:30,788 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:08:30,789 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:08:30,792 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:08:30,794 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:08:30,798 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:08:30,799 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:08:30,800 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:08:30,801 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:08:30,806 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:08:30,809 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:08:30,813 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:08:30,817 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:08:30,822 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:08:30,824 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:30,825 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:08:30,826 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:08:30,826 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:08:30,829 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:30,831 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:08:30,834 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:30,837 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:08:30,840 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:08:30,841 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:16:29,435 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001F676BDC550>
2025-09-05 14:16:29,441 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:16:29,442 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:16:29,442 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001F676BDC550>
2025-09-05 14:16:29,445 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:16:29,445 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:16:29,446 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:16:29,446 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:16:29,449 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:16:29,450 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:16:29,454 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:16:29,456 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:16:29,460 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:16:29,461 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:16:29,463 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:16:29,464 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:16:29,467 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:16:29,467 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:16:29,472 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:16:29,474 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:16:29,480 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:16:29,484 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:16:29,486 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:16:29,487 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:16:29,490 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:16:29,491 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:16:29,496 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:16:29,497 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:16:29,497 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:16:29,498 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:16:29,498 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:16:29,498 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': 'b6c9ea25-ef88-44a8-a262-ef21b9960d79'}
2025-09-05 14:16:29,503 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:16:29,505 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:16:29,506 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:16:29,510 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:16:29,510 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:16:29,511 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:16:29,514 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:16:29,518 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:16:29,526 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:16:29,526 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:16:29,527 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:16:29,527 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:16:29,532 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:16:29,536 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:16:29,541 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:16:29,544 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:16:29,547 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:16:29,551 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:16:29,551 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:16:29,551 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:16:29,554 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:29,557 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:16:29,559 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:29,561 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:16:29,564 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:29,567 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:16:48,172 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:16:48,173 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:16:48,174 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:16:48,178 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:48,184 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:16:48,188 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:48,190 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:16:48,196 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:16:48,204 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:17:57,188 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000002478C650550>
2025-09-05 14:17:57,191 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:17:57,192 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:17:57,193 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000002478C650550>
2025-09-05 14:17:57,196 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:17:57,197 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:17:57,197 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:17:57,198 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:17:57,201 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:17:57,202 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:17:57,205 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:17:57,205 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:17:57,207 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:17:57,208 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:17:57,210 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:17:57,211 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:17:57,215 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:17:57,216 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:17:57,220 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:17:57,221 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:17:57,228 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:17:57,232 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:17:57,236 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:17:57,237 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:17:57,241 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:17:57,241 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:17:57,247 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:17:57,247 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:17:57,248 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:17:57,248 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:17:57,249 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:17:57,250 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '6a027e71-3cf3-41e7-a9b9-b666f5091e0c'}
2025-09-05 14:17:57,256 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:17:57,257 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:17:57,257 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:17:57,263 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:17:57,263 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:17:57,264 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:17:57,267 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:17:57,271 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:17:57,275 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:17:57,276 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:17:57,276 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:17:57,277 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:17:57,280 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:17:57,287 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:17:57,291 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:17:57,294 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:17:57,298 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:17:57,303 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:17:57,304 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:17:57,305 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:17:57,307 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:17:57,309 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:17:57,312 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:17:57,315 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:17:57,320 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:17:57,322 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:18:22,181 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:18:22,182 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:18:22,182 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:18:22,385 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:22,387 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:18:22,388 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:22,389 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:18:22,392 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:22,393 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:18:42,203 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:18:42,203 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:18:42,203 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:18:42,378 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:42,379 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:18:42,381 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:42,382 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:18:42,385 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:18:42,387 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:20:26,846 - src.application.use_cases.upd_product - DEBUG - Цена pr2 сохранена для продукта p1
2025-09-05 14:20:26,847 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr2
2025-09-05 14:20:26,847 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr2
2025-09-05 14:20:27,025 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:27,026 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:20:27,029 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:27,032 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:20:27,038 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:27,040 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:20:39,401 - src.application.use_cases.upd_product - DEBUG - Цена pr2 сохранена для продукта p1
2025-09-05 14:20:39,401 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr2
2025-09-05 14:20:39,402 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr2
2025-09-05 14:20:39,403 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:39,406 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:20:39,409 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:39,411 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:20:39,413 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:39,415 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:20:44,219 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000002BB0857C550>
2025-09-05 14:20:44,226 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr2', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:20:44,227 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr2)
2025-09-05 14:20:44,228 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000002BB0857C550>
2025-09-05 14:20:44,232 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr2
2025-09-05 14:20:44,233 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:20:44,233 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:20:44,234 - test_repo_price - INFO - EXPECTED PRICE ID: pr2
2025-09-05 14:20:44,335 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:20:44,336 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:20:44,341 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:20:44,342 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:20:44,343 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:20:44,344 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:20:44,345 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:20:44,346 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:20:44,349 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:20:44,349 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:20:44,351 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:20:44,351 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:20:44,356 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:20:44,358 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:20:44,360 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:20:44,361 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:20:44,364 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:20:44,365 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:20:44,369 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:20:44,369 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:20:44,370 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:20:44,370 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:20:44,371 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:20:44,372 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '33662219-1460-4d9b-9d0c-656081633b83'}
2025-09-05 14:20:44,376 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:20:44,377 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:20:44,378 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:20:44,383 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:20:44,384 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:20:44,384 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:20:44,387 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:20:44,389 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:20:44,393 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:20:44,394 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:20:44,395 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:20:44,396 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:20:44,400 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:20:44,404 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:20:44,407 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:20:44,410 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:20:44,415 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:20:44,417 - src.application.use_cases.upd_product - DEBUG - Цена pr2 сохранена для продукта p1
2025-09-05 14:20:44,418 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr2
2025-09-05 14:20:44,418 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr2
2025-09-05 14:20:44,419 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:44,421 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:20:44,424 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:44,428 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:20:44,432 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:20:44,434 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:21:38,049 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x0000029889F5C550>
2025-09-05 14:21:38,051 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:21:38,052 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:21:38,053 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x0000029889F5C550>
2025-09-05 14:21:38,055 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:21:38,056 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:21:38,057 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:21:38,057 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:21:38,164 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:21:38,164 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:21:38,166 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:21:38,167 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:21:38,169 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:21:38,169 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:21:38,171 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:21:38,172 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:21:38,174 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:21:38,175 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:21:38,179 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:21:38,180 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:21:38,183 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:21:38,186 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:21:38,188 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:21:38,189 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:21:38,191 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:21:38,191 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:21:38,198 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:21:38,199 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:21:38,199 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:21:38,200 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:21:38,200 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:21:38,201 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '7f724fac-c2d9-431e-862b-ccc206b5faa4'}
2025-09-05 14:21:38,206 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:21:38,207 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:21:38,208 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:21:38,214 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:21:38,215 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:21:38,216 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:21:38,220 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:21:38,226 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:21:38,236 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:21:38,237 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:21:38,237 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:21:38,238 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:21:38,242 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:21:38,251 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:21:38,255 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:21:38,258 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:21:38,264 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:21:38,270 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:21:38,271 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:21:38,271 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:21:38,273 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:21:38,277 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:21:38,280 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:21:38,283 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:21:38,286 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:21:38,287 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:24:26,511 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001E3AE094550>
2025-09-05 14:24:26,513 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:24:26,515 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:24:26,515 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001E3AE094550>
2025-09-05 14:24:26,519 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:24:26,519 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:24:26,520 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:24:26,520 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:24:26,528 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:24:26,529 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:24:26,533 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:24:26,534 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:24:26,537 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:24:26,538 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:24:26,544 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:24:26,544 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:24:26,548 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:24:26,549 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:24:26,551 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:24:26,552 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:24:26,559 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:24:26,561 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:24:26,564 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:24:26,565 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:24:26,567 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:24:26,568 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:24:26,577 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:24:26,577 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:24:26,578 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:24:26,578 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:24:26,579 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:24:26,579 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '044fa3c4-d9da-49c1-bb0b-0243fb0ca219'}
2025-09-05 14:24:26,584 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:24:26,584 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:24:26,585 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:24:26,592 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:24:26,593 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:24:26,593 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:24:26,596 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:24:26,599 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:24:26,602 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:24:26,603 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:24:26,604 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:24:26,604 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:24:26,611 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:24:26,616 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:24:26,620 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:24:26,625 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:24:26,628 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:24:26,632 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:24:26,633 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:24:26,633 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:24:26,635 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:24:26,641 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:24:26,644 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:24:26,646 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:24:26,650 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:24:26,652 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:25:13,092 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:25:13,094 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:25:13,094 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:25:13,096 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:25:13,098 - src.application.use_cases.upd_product - WARNING - Продукт с id p1 не найден
2025-09-05 14:25:13,101 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:25:13,104 - src.application.use_cases.upd_product - ERROR - Идентификатор продукта не указан
2025-09-05 14:25:13,106 - fixtures.repositories - DEBUG - TYPE OF MOCK PRODUCT REPO <class '_pytest.fixtures.FixtureFunctionDefinition'>
2025-09-05 14:25:13,108 - src.application.use_cases.upd_product - ERROR - Идентификатор цены не указан
2025-09-05 14:36:59,199 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:36:59,201 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:36:59,201 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:37:06,445 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:37:06,445 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:37:06,446 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:38:25,858 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:38:25,858 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:38:25,859 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:39:02,667 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:39:02,668 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:39:02,668 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:40:20,828 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001F09FD48550>
2025-09-05 14:40:20,832 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:40:20,833 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:40:20,834 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001F09FD48550>
2025-09-05 14:40:20,837 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:40:20,838 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:40:20,838 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:40:20,838 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:40:20,841 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:40:20,842 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:40:20,845 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:40:20,845 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:40:20,847 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:40:20,848 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:40:20,852 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:40:20,852 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:40:20,854 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:40:20,855 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:40:20,856 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:40:20,857 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:40:20,862 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:40:20,864 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:40:20,868 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:40:20,869 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:40:20,871 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:40:20,871 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:40:20,875 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:40:20,876 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:40:20,876 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:40:20,877 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:40:20,877 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:40:20,878 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '751e728e-f1d5-477e-9d8d-7d0d22b34d73'}
2025-09-05 14:40:20,882 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:40:20,884 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:40:20,885 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:40:20,890 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:40:20,890 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:40:20,891 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:40:20,895 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:40:20,899 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:40:20,904 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:40:20,905 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:40:20,905 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:40:20,905 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:40:20,911 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:40:20,916 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:40:20,922 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:40:20,924 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:40:20,927 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:40:20,932 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:40:20,933 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:40:20,933 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:52:10,455 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x0000025327A78550>
2025-09-05 14:52:10,460 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:52:10,461 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:52:10,461 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x0000025327A78550>
2025-09-05 14:52:10,465 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:52:10,465 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:52:10,466 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:52:10,467 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:52:10,472 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:52:10,473 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:52:10,478 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:52:10,479 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:52:10,483 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:52:10,484 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:52:10,487 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:52:10,488 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:52:10,492 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:52:10,493 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:52:10,497 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:52:10,498 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:52:10,515 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:52:10,521 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:52:10,525 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:52:10,526 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:52:10,532 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:52:10,533 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:52:10,543 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:52:10,544 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:52:10,544 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:52:10,545 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:52:10,546 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:52:10,547 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '8ece1731-0900-4645-9314-f3f3a6f014cf'}
2025-09-05 14:52:10,557 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:52:10,558 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:52:10,558 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:52:10,567 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:52:10,568 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:52:10,568 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:52:10,574 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:52:10,579 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:52:10,589 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:52:10,589 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:52:10,590 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:52:10,591 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:52:10,597 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:52:10,604 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:52:10,611 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:52:10,616 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:52:10,620 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:52:10,632 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:52:10,634 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:52:10,635 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
2025-09-05 14:53:38,080 - test_mapper_user - DEBUG - USER ORM - <src.infrastructure.database.models.user.ORMUser object at 0x000001A0E2030550>
2025-09-05 14:53:38,083 - src.infrastructure.database.repositories.price_repository - INFO - Сохранение цены: Price(id='pr1', product_id='p1', with_card=120, without_card=140, previous_with_card=100, previous_without_card=120, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0))
2025-09-05 14:53:38,084 - src.infrastructure.database.repositories.price_repository - DEBUG - Цена успешно сохранена (ID: pr1)
2025-09-05 14:53:38,084 - test_repo_price - INFO - ORM объект, переданный в merge: <src.infrastructure.database.models.price.ORMPrice object at 0x000001A0E2030550>
2025-09-05 14:53:38,086 - src.infrastructure.database.repositories.price_repository - DEBUG - Поиск цены по ID: pr1
2025-09-05 14:53:38,087 - src.infrastructure.database.repositories.price_repository - INFO - Найдена цена: Price(id='pr1', product_id='p1', with_card=100, without_card=120, previous_with_card=90, previous_without_card=110, default=150, claim=datetime.datetime(2025, 1, 1, 0, 0)) (ID: pr1)
2025-09-05 14:53:38,087 - test_repo_price - INFO - RESULT OBJECT ID: pr1
2025-09-05 14:53:38,087 - test_repo_price - INFO - EXPECTED PRICE ID: pr1
2025-09-05 14:53:38,089 - src.infrastructure.database.repositories.price_repository - DEBUG - Получение всех цен для продукта p1
2025-09-05 14:53:38,090 - src.infrastructure.database.repositories.price_repository - INFO - Найдено 1 цен для продукта p1
2025-09-05 14:53:38,092 - src.infrastructure.database.repositories.product_repository - INFO - Сохранение товара: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2'])
2025-09-05 14:53:38,093 - src.infrastructure.database.repositories.product_repository - DEBUG - Товар успешно сохранен (ID: p1)
2025-09-05 14:53:38,096 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: p1
2025-09-05 14:53:38,096 - src.infrastructure.database.repositories.product_repository - INFO - Найден Товар: Product(id='p1', user_id='u1', price_id='pr1', name='Test Product', link='https://example.com/product', image_url='https://example.com/image.jpg', rating=4.5, categories=['cat1', 'cat2']) (ID: p1)
2025-09-05 14:53:38,101 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск товар по ID: NOTEXIST_ID
2025-09-05 14:53:38,102 - src.infrastructure.database.repositories.product_repository - WARNING - Товар с ID NOTEXIST_ID не найден
2025-09-05 14:53:38,105 - src.infrastructure.database.repositories.product_repository - DEBUG - Поиск всех товаров пользователя u1
2025-09-05 14:53:38,106 - src.infrastructure.database.repositories.product_repository - INFO - Найдено 1 товаров для пользователя u1
2025-09-05 14:53:38,108 - src.infrastructure.database.repositories.product_repository - INFO - Попытка удаления товара с ID: p1
2025-09-05 14:53:38,109 - src.infrastructure.database.repositories.product_repository - INFO - Товар с ID p1 успешно удален
2025-09-05 14:53:38,114 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь User(id='u1', username='test_user', chat_id='12345', products=[]) получен по id: u1
2025-09-05 14:53:38,118 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:53:38,121 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: u1
2025-09-05 14:53:38,121 - src.infrastructure.database.repositories.user_repository - INFO - Пользователь с id: u1 удален
2025-09-05 14:53:38,123 - src.infrastructure.database.repositories.user_repository - INFO - Попытка удаления пользователя с ID: NOTEXIST_ID
2025-09-05 14:53:38,123 - src.infrastructure.database.repositories.user_repository - WARNING - Пользователь с id NOTEXIST_ID не найден
2025-09-05 14:53:38,127 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:53:38,128 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:53:38,128 - src.application.use_cases.create_product - DEBUG - Сохранение нового пользователя u1
2025-09-05 14:53:38,129 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:53:38,129 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:53:38,130 - test_use_case_create_product - DEBUG - RESULT USE CASE -> {'product_id': 'p1', 'product_name': 'Test Product', 'user_id': 'u1', 'price_id': '4068c2ad-3359-4027-9cc7-9b5f4780af0e'}
2025-09-05 14:53:38,136 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:53:38,138 - src.application.use_cases.create_product - DEBUG - Обновление списка продуктов для пользователя u1
2025-09-05 14:53:38,139 - src.application.use_cases.create_product - INFO - Товар Test Product сохранён для пользователя u1
2025-09-05 14:53:38,146 - src.application.use_cases.create_product - INFO - Успешный парсинг данных для https://example.com/product: {'id': 'p1', 'name': 'Test Product', 'image_url': 'https://example.com/image.jpg', 'rating': 4.5, 'categories': ['cat1', 'cat2'], 'price_with_card': 100, 'price_without_card': 120, 'price_default': 150}
2025-09-05 14:53:38,147 - src.application.use_cases.create_product - DEBUG - Создание нового пользователя u1
2025-09-05 14:53:38,148 - src.application.use_cases.create_product - ERROR - Товар с ID p1 уже существует
2025-09-05 14:53:38,153 - src.application.use_cases.create_user - INFO - Пользователь u1 успешно создан
2025-09-05 14:53:38,156 - src.application.use_cases.create_user - INFO - Пользователь u1 уже существует, пропускаем создание
2025-09-05 14:53:38,160 - src.application.use_cases.delete_product - DEBUG - Цена pr1 удалена для товара p1
2025-09-05 14:53:38,161 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален
2025-09-05 14:53:38,161 - src.application.use_cases.delete_product - DEBUG - Товар p1 удален из списка пользователя u1
2025-09-05 14:53:38,161 - src.application.use_cases.delete_product - INFO - Операция удаления выполнена для ID p1
2025-09-05 14:53:38,167 - src.application.use_cases.delete_product - WARNING - Товар p1 не существует в БД, пропускаем удаление
2025-09-05 14:53:38,173 - src.application.use_cases.get_full_product - INFO - Успешно получена информация о товаре p1
2025-09-05 14:53:38,179 - src.application.use_cases.get_full_product - WARNING - Товар NOT_EXIST_ID не найден
2025-09-05 14:53:38,183 - src.application.use_cases.get_product - INFO - Продукт p1 успешно получен
2025-09-05 14:53:38,187 - src.application.use_cases.get_product - WARNING - Продукт p1 не найден
2025-09-05 14:53:38,191 - src.application.use_cases.upd_product - DEBUG - Цена pr1 сохранена для продукта p1
2025-09-05 14:53:38,191 - src.application.use_cases.upd_product - DEBUG - Продукт p1 обновлен с price_id=pr1
2025-09-05 14:53:38,192 - src.application.use_cases.upd_product - INFO - Цена успешно обновлена для продукта p1, price_id=pr1
