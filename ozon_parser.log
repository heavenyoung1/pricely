2025-10-14 12:50:32,643 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-14 12:50:32,645 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-14 12:50:32,680 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-14 12:50:32,684 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-14 12:50:32,689 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-14 12:50:32,690 - apscheduler.scheduler - INFO - Scheduler started
2025-10-14 12:50:32,690 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-14 12:50:32,691 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-14 12:50:32,692 - aiogram.dispatcher - INFO - Start polling
2025-10-14 12:50:32,972 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:50:41,761 - aiogram.event - INFO - Update id=557185718 is handled. Duration 316 ms by bot id=5702092394
2025-10-14 12:50:52,360 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-14 12:50:53,568 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:51:01,729 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:51:01,729 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:51:02,668 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD
2025-10-14 12:51:02,669 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD
2025-10-14 12:51:13,017 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∞—Ä—Ç–∏–∫—É–ª–∞: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba060f]
	(No symbol) [0x0x7ff72ebf8854]
	(No symbol) [0x0x7ff72ebf8b1c]
	(No symbol) [0x0x7ff72ec4c927]
	(No symbol) [0x0x7ff72ec2126f]
	(No symbol) [0x0x7ff72ec4968a]
	(No symbol) [0x0x7ff72ec21003]
	(No symbol) [0x0x7ff72ebe95d1]
	(No symbol) [0x0x7ff72ebea3f3]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	GetHandleVerifier [0x0x7ff72ee27b94+117460]
	GetHandleVerifier [0x0x7ff72ee27d4f+117903]
	GetHandleVerifier [0x0x7ff72ee0dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:51:23,104 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba060f]
	(No symbol) [0x0x7ff72ebf8854]
	(No symbol) [0x0x7ff72ebf8b1c]
	(No symbol) [0x0x7ff72ec4c927]
	(No symbol) [0x0x7ff72ec2126f]
	(No symbol) [0x0x7ff72ec4968a]
	(No symbol) [0x0x7ff72ec21003]
	(No symbol) [0x0x7ff72ebe95d1]
	(No symbol) [0x0x7ff72ebea3f3]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	GetHandleVerifier [0x0x7ff72ee27b94+117460]
	GetHandleVerifier [0x0x7ff72ee27d4f+117903]
	GetHandleVerifier [0x0x7ff72ee0dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:51:28,405 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 4.8
2025-10-14 12:51:28,674 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 11470
2025-10-14 12:51:29,022 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 12503
2025-10-14 12:51:29,294 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg
2025-10-14 12:51:33,653 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea']
2025-10-14 12:51:33,654 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': None, 'name': None, 'rating': 4.8, 'price_with_card': 11470, 'price_without_card': 12503, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea']}
2025-10-14 12:51:36,104 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:51:36,105 - src.application.use_cases.create_product - INFO - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD: {'id': None, 'name': None, 'rating': 4.8, 'price_with_card': 11470, 'price_without_card': 12503, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea']} –∑–∞–≤–µ—Ä—à–µ–Ω.
2025-10-14 12:51:36,421 - src.infrastructure.database.repositories.product_repository - WARNING - –¢–æ–≤–∞—Ä —Å ID None –Ω–µ –Ω–∞–π–¥–µ–Ω
2025-10-14 12:51:36,444 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å User(id='515084006', username='heavenyoung', chat_id='515084006', products=['1728110604', '1609078406', '2582743922']) –ø–æ–ª—É—á–µ–Ω –ø–æ id: 515084006
2025-10-14 12:51:36,449 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω/–æ–±–Ω–æ–≤–ª–µ–Ω
2025-10-14 12:51:36,450 - src.infrastructure.database.repositories.product_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Product(id=None, user_id='515084006', name=None, link='https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD', image_url='https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', rating=4.8, categories=['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea'], prices=[Price(id=None, product_id=None, with_card=11470, without_card=12503, previous_with_card=None, previous_without_card=None, created_at=datetime.datetime(2025, 10, 14, 12, 51, 36, 422279))])
2025-10-14 12:51:36,459 - src.infrastructure.database.repositories.price_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: Price(id=None, product_id=None, with_card=11470, without_card=12503, previous_with_card=None, previous_without_card=None, created_at=datetime.datetime(2025, 10, 14, 12, 51, 36, 422279))
2025-10-14 12:51:36,460 - src.infrastructure.database.repositories.user_products_repository - INFO - –ü—Ä–∏–≤—è–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ ID None –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ID 515084006
2025-10-14 12:51:36,461 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è create_product: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:51:36,527 - src.core.uow - ERROR - Unit of Work: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω. –û—à–∏–±–∫–∞: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-e..., https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg, 4.8, {"–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞","–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞..., 2025-10-14 12:51:36.494389).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD', 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'rating': 4.8, 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea'], 'created_at': datetime.datetime(2025, 10, 14, 12, 51, 36, 494389)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:51:36,528 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:51:36,529 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-e..., https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg, 4.8, {"–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞","–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞..., 2025-10-14 12:51:36.494389).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD', 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'rating': 4.8, 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea'], 'created_at': datetime.datetime(2025, 10, 14, 12, 51, 36, 494389)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:51:36,529 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:51:36,530 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:51:36,530 - src.core.decorators - ERROR - –û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ create_product: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-e..., https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg, 4.8, {"–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞","–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞..., 2025-10-14 12:51:36.494389).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD', 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'rating': 4.8, 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea'], 'created_at': datetime.datetime(2025, 10, 14, 12, 51, 36, 494389)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:51:36,531 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.NotNullViolation: null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-e..., https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg, 4.8, {"–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞","–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞..., 2025-10-14 12:51:36.494389).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\presentation\bot\handlers\products.py", line 34, in add_product_process
    result = product_service.create_product(str(message.from_user.id), url)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\decorators.py", line 71, in wrapper
    uow.commit()  # –Ø–≤–Ω—ã–π commit
    ~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\uow.py", line 124, in commit
    self._session.commit()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1413, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1840, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1980, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2349, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-e..., https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg, 4.8, {"–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞","–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞..., 2025-10-14 12:51:36.494389).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/robot-pylesos-s-wi-fi-midea-vcr-m7-evo-lidar-suhaya-i-vlazhnaya-uborka-turbo-shchetka-8000-pa-1718175628/?at=K8tZOpBmlSn8ZGQPC2q6mw2CX2EK9ktwPrk9nTBA3jQD', 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-k/wc1000/7749681968.jpg', 'rating': 4.8, 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Midea'], 'created_at': datetime.datetime(2025, 10, 14, 12, 51, 36, 494389)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:51:36,869 - apscheduler.executors.default - WARNING - Run time of job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:52:32 MSK)" was missed by 0:00:04.184567
2025-10-14 12:51:37,143 - aiogram.event - INFO - Update id=557185719 is handled. Duration 45019 ms by bot id=5702092394
2025-10-14 12:51:51,779 - aiogram.dispatcher - INFO - Polling stopped
2025-10-14 12:51:51,782 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-10-14 12:51:51,782 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 5702092394)
2025-10-14 12:51:51,939 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:51:59,290 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-14 12:51:59,293 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-14 12:51:59,299 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-14 12:51:59,301 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-14 12:51:59,302 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-14 12:51:59,302 - apscheduler.scheduler - INFO - Scheduler started
2025-10-14 12:51:59,303 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-14 12:51:59,303 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-14 12:51:59,303 - aiogram.dispatcher - INFO - Start polling
2025-10-14 12:51:59,544 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:52:59,307 - apscheduler.executors.default - INFO - Running job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:53:59 MSK)" (scheduled at 2025-10-14 12:52:59.301052+03:00)
2025-10-14 12:52:59,308 - src.infrastructure.services.logger - INFO - üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω...
2025-10-14 12:52:59,309 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-14 12:52:59,427 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:52:59,428 - src.application.use_cases.get_user_products - INFO - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ APSchedulerService
2025-10-14 12:52:59,428 - src.infrastructure.database.repositories.user_products_repository - INFO - –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ {product_id:user_id} –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UserProductsRepositoryImpl
2025-10-14 12:52:59,540 - src.infrastructure.database.repositories.user_products_repository - INFO - Rows -> [<src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A859575BE0>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A85957D950>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A85957DA90>]
2025-10-14 12:52:59,540 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {})
2025-10-14 12:52:59,541 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604']})
2025-10-14 12:52:59,541 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604', '1609078406']})
2025-10-14 12:52:59,542 - src.infrastructure.database.repositories.user_products_repository - INFO - –ó–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ (user_id: [product_id, product_id, ...]) –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
2025-10-14 12:52:59,542 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products_for_update: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-14 12:52:59,544 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:52:59,545 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:52:59,545 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:52:59,546 - src.infrastructure.services.logger - INFO - USERS_PRODUCTS –ü–û–õ–£–ß–ï–ù–´ {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:52:59,546 - src.infrastructure.services.logger - INFO - USER_PRODUCT_ITEMS: {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:52:59,546 - src.infrastructure.services.logger - INFO - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 515084006
2025-10-14 12:52:59,547 - src.infrastructure.services.logger - INFO - –¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 515084006: ['1728110604', '1609078406', '2582743922']
2025-10-14 12:52:59,547 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1728110604
2025-10-14 12:52:59,548 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:52:59,577 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-14 12:53:01,292 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:53:01,293 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:53:02,275 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-14 12:53:02,276 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-14 12:53:08,439 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 1728110604
2025-10-14 12:53:08,771 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π
2025-10-14 12:53:09,008 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 4.8
2025-10-14 12:53:09,346 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830
2025-10-14 12:53:09,650 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 15990
2025-10-14 12:53:09,851 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-8/wc1000/7922729852.jpg
2025-10-14 12:53:14,403 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Xiaomi']
2025-10-14 12:53:14,406 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'rating': 4.8, 'price_with_card': 15830, 'price_without_card': 15990, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-8/wc1000/7922729852.jpg', 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Xiaomi']}
2025-10-14 12:53:16,506 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:53:16,506 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830
2025-10-14 12:53:16,507 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductPriceUseCase: {'is_changed': False, 'product_data': {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}}
2025-10-14 12:53:16,507 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:53:16,509 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:16,510 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:16,510 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:53:16,511 - src.infrastructure.services.logger - INFO - –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ Scheduler –ø–µ—Ä–µ–¥–∞–Ω result: {'updated_product': {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}, 'is_changed': True}
2025-10-14 12:53:16,511 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù UPDATED_PRODUCT: {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}
2025-10-14 12:53:16,511 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù –§–õ–ê–ì is_changed: True
2025-10-14 12:53:16,512 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1609078406
2025-10-14 12:53:16,512 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:53:16,523 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥ (ID: 1609078406)
2025-10-14 12:53:18,167 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:53:18,168 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:53:19,254 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw
2025-10-14 12:53:19,255 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw
2025-10-14 12:53:25,628 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 1609078406
2025-10-14 12:53:25,873 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥
2025-10-14 12:53:26,237 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 4.9
2025-10-14 12:53:26,563 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164
2025-10-14 12:53:26,843 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 6290
2025-10-14 12:53:27,006 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-b/wc1000/7494502547.jpg
2025-10-14 12:53:30,068 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–ò–≥—Ä—ã –∏ –∫–æ–Ω—Å–æ–ª–∏', 'Xbox', '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', 'Microsoft']
2025-10-14 12:53:30,069 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'rating': 4.9, 'price_with_card': 6164, 'price_without_card': 6290, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-b/wc1000/7494502547.jpg', 'categories': ['–ò–≥—Ä—ã –∏ –∫–æ–Ω—Å–æ–ª–∏', 'Xbox', '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', 'Microsoft']}
2025-10-14 12:53:32,154 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:53:32,155 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164
2025-10-14 12:53:32,155 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductPriceUseCase: {'is_changed': False, 'product_data': {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}}
2025-10-14 12:53:32,156 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:53:32,168 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:32,169 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:32,169 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:53:32,170 - src.infrastructure.services.logger - INFO - –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ Scheduler –ø–µ—Ä–µ–¥–∞–Ω result: {'updated_product': {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}, 'is_changed': True}
2025-10-14 12:53:32,170 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù UPDATED_PRODUCT: {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}
2025-10-14 12:53:32,171 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù –§–õ–ê–ì is_changed: True
2025-10-14 12:53:32,171 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=2582743922
2025-10-14 12:53:32,172 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:53:32,185 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞ (ID: 2582743922)
2025-10-14 12:53:33,677 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:53:33,678 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:53:34,650 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 12:53:34,651 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 12:53:40,791 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 2582743922
2025-10-14 12:53:41,086 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞
2025-10-14 12:53:41,411 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 5.0
2025-10-14 12:53:41,715 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 593
2025-10-14 12:53:41,887 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 661
2025-10-14 12:53:42,016 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-0/wc1000/8056672128.jpg
2025-10-14 12:53:45,064 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö', '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', '–ö—Ä–µ–∞—Ç–∏–Ω—ã', 'vitmins']
2025-10-14 12:53:45,064 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'rating': 5.0, 'price_with_card': 593, 'price_without_card': 661, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-0/wc1000/8056672128.jpg', 'categories': ['–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö', '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', '–ö—Ä–µ–∞—Ç–∏–Ω—ã', 'vitmins']}
2025-10-14 12:53:47,159 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:53:47,160 - src.infrastructure.database.repositories.price_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: Price(id=None, product_id='2582743922', with_card=593, without_card=661, previous_with_card=606, previous_without_card=676, created_at=datetime.datetime(2025, 10, 14, 12, 53, 47, 160164))
2025-10-14 12:53:47,161 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 606, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 593
2025-10-14 12:53:47,161 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductPriceUseCase: {'is_changed': True, 'product_data': {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'with_card': 593, 'without_card': 661, 'previous_price_with_card': 606, 'previous_price_without_card': 676}}
2025-10-14 12:53:47,162 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:53:47,207 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:47,207 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:47,208 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:53:47,208 - src.infrastructure.services.logger - INFO - –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ Scheduler –ø–µ—Ä–µ–¥–∞–Ω result: {'updated_product': {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'with_card': 593, 'without_card': 661, 'previous_price_with_card': 606, 'previous_price_without_card': 676}, 'is_changed': True}
2025-10-14 12:53:47,208 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù UPDATED_PRODUCT: {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'with_card': 593, 'without_card': 661, 'previous_price_with_card': 606, 'previous_price_without_card': 676}
2025-10-14 12:53:47,209 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù –§–õ–ê–ì is_changed: True
2025-10-14 12:53:47,209 - src.infrastructure.services.logger - INFO - ‚ö†Ô∏è  –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é [{'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}, {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}, {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'with_card': 593, 'without_card': 661, 'previous_price_with_card': 606, 'previous_price_without_card': 676}]
2025-10-14 12:53:47,210 - src.infrastructure.services.notification_service - INFO - üì® NotificationService: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 515084006
2025-10-14 12:53:47,211 - src.infrastructure.services.notification_service - INFO - üìù –¢–µ–∫—Å—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω: üîî –¶–µ–Ω—ã –Ω–∞ 3 —Ç–æ–≤–∞—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å!

üìà üì¶ [*Xiaomi S20 E...
2025-10-14 12:53:47,457 - src.infrastructure.services.notification_service - INFO - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ ID 1973 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 515084006
2025-10-14 12:53:47,457 - src.infrastructure.services.logger - INFO - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–æ.
2025-10-14 12:53:47,458 - apscheduler.executors.default - INFO - Job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:53:59 MSK)" executed successfully
2025-10-14 12:53:47,459 - src.infrastructure.services.logger - INFO - ‚úÖ SchedulerService –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á—É —É—Å–ø–µ—à–Ω–æ.
2025-10-14 12:53:59,316 - apscheduler.executors.default - INFO - Running job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:54:59 MSK)" (scheduled at 2025-10-14 12:53:59.301052+03:00)
2025-10-14 12:53:59,317 - src.infrastructure.services.logger - INFO - üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω...
2025-10-14 12:53:59,317 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:53:59,318 - src.application.use_cases.get_user_products - INFO - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ APSchedulerService
2025-10-14 12:53:59,318 - src.infrastructure.database.repositories.user_products_repository - INFO - –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ {product_id:user_id} –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UserProductsRepositoryImpl
2025-10-14 12:53:59,327 - src.infrastructure.database.repositories.user_products_repository - INFO - Rows -> [<src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A85956A9E0>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A85956A650>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002A859630290>]
2025-10-14 12:53:59,328 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {})
2025-10-14 12:53:59,328 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604']})
2025-10-14 12:53:59,329 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604', '1609078406']})
2025-10-14 12:53:59,329 - src.infrastructure.database.repositories.user_products_repository - INFO - –ó–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ (user_id: [product_id, product_id, ...]) –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
2025-10-14 12:53:59,329 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products_for_update: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-14 12:53:59,333 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:59,334 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:53:59,334 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:53:59,335 - src.infrastructure.services.logger - INFO - USERS_PRODUCTS –ü–û–õ–£–ß–ï–ù–´ {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:53:59,335 - src.infrastructure.services.logger - INFO - USER_PRODUCT_ITEMS: {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:53:59,336 - src.infrastructure.services.logger - INFO - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 515084006
2025-10-14 12:53:59,336 - src.infrastructure.services.logger - INFO - –¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 515084006: ['1728110604', '1609078406', '2582743922']
2025-10-14 12:53:59,337 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1728110604
2025-10-14 12:53:59,337 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:53:59,360 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-14 12:54:00,816 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:54:00,817 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:54:01,789 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-14 12:54:01,789 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-14 12:54:02,820 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∞—Ä—Ç–∏–∫—É–ª–∞: Message: invalid session id: session deleted as the browser has closed the connection
from disconnected: not connected to DevTools
  (Session info: chrome=141.0.7390.76); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba060f]
	(No symbol) [0x0x7ff72eb8c145]
	(No symbol) [0x0x7ff72ebb177a]
	(No symbol) [0x0x7ff72ec28b06]
	(No symbol) [0x0x7ff72ec48fa2]
	(No symbol) [0x0x7ff72ec21003]
	(No symbol) [0x0x7ff72ebe95d1]
	(No symbol) [0x0x7ff72ebea3f3]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	GetHandleVerifier [0x0x7ff72ee27b94+117460]
	GetHandleVerifier [0x0x7ff72ee27d4f+117903]
	GetHandleVerifier [0x0x7ff72ee0dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,898 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,902 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,905 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Å –∫–∞—Ä—Ç–æ–π: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,908 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã –±–µ–∑ –∫–∞—Ä—Ç—ã: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,911 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,915 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff72ee1e955+80021]
	GetHandleVerifier [0x0x7ff72ee1e9b0+80112]
	(No symbol) [0x0x7ff72eba0425]
	(No symbol) [0x0x7ff72ebe864f]
	(No symbol) [0x0x7ff72ec210f2]
	(No symbol) [0x0x7ff72ec1b89f]
	(No symbol) [0x0x7ff72ec1a94a]
	(No symbol) [0x0x7ff72eb6a765]
	GetHandleVerifier [0x0x7ff72f0ddd0d+2960461]
	GetHandleVerifier [0x0x7ff72f0d7fca+2936586]
	GetHandleVerifier [0x0x7ff72f0f8a07+3070279]
	GetHandleVerifier [0x0x7ff72ee3843e+185214]
	GetHandleVerifier [0x0x7ff72ee3fe8f+216527]
	(No symbol) [0x0x7ff72eb6970e]
	GetHandleVerifier [0x0x7ff72f216af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:54:02,916 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': None, 'name': None, 'rating': None, 'price_with_card': None, 'price_without_card': None, 'image_url': None, 'categories': []}
2025-10-14 12:54:04,118 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:54:04,118 - src.infrastructure.database.repositories.price_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: Price(id=None, product_id='1728110604', with_card=None, without_card=None, previous_with_card=15830, previous_without_card=15990, created_at=datetime.datetime(2025, 10, 14, 12, 54, 4, 118815))
2025-10-14 12:54:04,119 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: None
2025-10-14 12:54:04,120 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductPriceUseCase: {'is_changed': True, 'product_data': {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': None, 'without_card': None, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}}
2025-10-14 12:54:04,120 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:54:04,133 - src.core.uow - ERROR - Unit of Work: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω. –û—à–∏–±–∫–∞: (psycopg2.errors.NotNullViolation) null value in column "with_card" of relation "prices" violates not-null constraint
DETAIL:  Failing row contains (201, 1728110604, null, null, 15830, 15990, 2025-10-14 12:54:04.118815).

[SQL: INSERT INTO prices (product_id, with_card, without_card, previous_with_card, previous_without_card, created_at) VALUES (%(product_id)s, %(with_card)s, %(without_card)s, %(previous_with_card)s, %(previous_without_card)s, %(created_at)s) RETURNING prices.id]
[parameters: {'product_id': '1728110604', 'with_card': None, 'without_card': None, 'previous_with_card': 15830, 'previous_without_card': 15990, 'created_at': datetime.datetime(2025, 10, 14, 12, 54, 4, 118815)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:54:04,138 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:54:04,139 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "with_card" of relation "prices" violates not-null constraint
DETAIL:  Failing row contains (201, 1728110604, null, null, 15830, 15990, 2025-10-14 12:54:04.118815).

[SQL: INSERT INTO prices (product_id, with_card, without_card, previous_with_card, previous_without_card, created_at) VALUES (%(product_id)s, %(with_card)s, %(without_card)s, %(previous_with_card)s, %(previous_without_card)s, %(created_at)s) RETURNING prices.id]
[parameters: {'product_id': '1728110604', 'with_card': None, 'without_card': None, 'previous_with_card': 15830, 'previous_without_card': 15990, 'created_at': datetime.datetime(2025, 10, 14, 12, 54, 4, 118815)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:54:04,139 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:54:04,140 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:54:04,140 - src.core.decorators - ERROR - –û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ update_product_price: (psycopg2.errors.NotNullViolation) null value in column "with_card" of relation "prices" violates not-null constraint
DETAIL:  Failing row contains (201, 1728110604, null, null, 15830, 15990, 2025-10-14 12:54:04.118815).

[SQL: INSERT INTO prices (product_id, with_card, without_card, previous_with_card, previous_without_card, created_at) VALUES (%(product_id)s, %(with_card)s, %(without_card)s, %(previous_with_card)s, %(previous_without_card)s, %(created_at)s) RETURNING prices.id]
[parameters: {'product_id': '1728110604', 'with_card': None, 'without_card': None, 'previous_with_card': 15830, 'previous_without_card': 15990, 'created_at': datetime.datetime(2025, 10, 14, 12, 54, 4, 118815)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:54:04,141 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–æ–≤–∞—Ä–∞ 1728110604: (psycopg2.errors.NotNullViolation) null value in column "with_card" of relation "prices" violates not-null constraint
DETAIL:  Failing row contains (201, 1728110604, null, null, 15830, 15990, 2025-10-14 12:54:04.118815).

[SQL: INSERT INTO prices (product_id, with_card, without_card, previous_with_card, previous_without_card, created_at) VALUES (%(product_id)s, %(with_card)s, %(without_card)s, %(previous_with_card)s, %(previous_without_card)s, %(created_at)s) RETURNING prices.id]
[parameters: {'product_id': '1728110604', 'with_card': None, 'without_card': None, 'previous_with_card': 15830, 'previous_without_card': 15990, 'created_at': datetime.datetime(2025, 10, 14, 12, 54, 4, 118815)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:54:04,141 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1609078406
2025-10-14 12:54:04,142 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:54:04,161 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥ (ID: 1609078406)
2025-10-14 12:54:06,336 - src.infrastructure.parsers.session_engine - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebDriver: Message: Service C:\Users\Mefyod-EA\.cache\selenium\chromedriver\win64\141.0.7390.76\chromedriver.exe unexpectedly exited. Status code was: 3221225786

2025-10-14 12:54:06,337 - src.infrastructure.parsers.session_decorator - ERROR - –û—à–∏–±–∫–∞ –≤ –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏: Message: Service C:\Users\Mefyod-EA\.cache\selenium\chromedriver\win64\141.0.7390.76\chromedriver.exe unexpectedly exited. Status code was: 3221225786

2025-10-14 12:54:06,337 - src.application.use_cases.upd_product - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 1609078406: Message: Service C:\Users\Mefyod-EA\.cache\selenium\chromedriver\win64\141.0.7390.76\chromedriver.exe unexpectedly exited. Status code was: 3221225786

2025-10-14 12:54:06,338 - src.application.use_cases.upd_product - ERROR - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞ 1609078406: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 1609078406
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\application\use_cases\upd_product.py", line 65, in execute
    product_data = self.parser.parse_product(product.link)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_decorator.py", line 35, in wrapper
    session = SessionEngine(
        headless=headless,
    ...<2 lines>...
        wait_time=wait_time
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_engine.py", line 41, in __init__
    self._initialize_driver()
    ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_engine.py", line 65, in _initialize_driver
    self.driver = webdriver.Chrome(options=options)
                  ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\chrome\webdriver.py", line 47, in __init__
    super().__init__(
    ~~~~~~~~~~~~~~~~^
        browser_name=DesiredCapabilities.CHROME["browserName"],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
        keep_alive=keep_alive,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\chromium\webdriver.py", line 58, in __init__
    self.service.start()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\common\service.py", line 108, in start
    self.assert_process_still_running()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\common\service.py", line 121, in assert_process_still_running
    raise WebDriverException(f"Service {self._path} unexpectedly exited. Status code was: {return_code}")
selenium.common.exceptions.WebDriverException: Message: Service C:\Users\Mefyod-EA\.cache\selenium\chromedriver\win64\141.0.7390.76\chromedriver.exe unexpectedly exited. Status code was: 3221225786


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\application\use_cases\upd_product.py", line 68, in execute
    raise PriceUpdateError(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–≤–∞—Ä–∞ {product_id}')
src.domain.exceptions.PriceUpdateError: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–≤–∞—Ä–∞ 1609078406
2025-10-14 12:54:06,472 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: PriceUpdateError: –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞ 1609078406
2025-10-14 12:54:06,474 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:54:06,474 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:54:06,475 - src.core.decorators - ERROR - –û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ update_product_price: –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞ 1609078406
2025-10-14 12:54:06,475 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–æ–≤–∞—Ä–∞ 1609078406: –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞ 1609078406
2025-10-14 12:54:06,476 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=2582743922
2025-10-14 12:54:06,476 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:54:06,487 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞ (ID: 2582743922)
2025-10-14 12:54:08,172 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:54:08,173 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:54:11,160 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: KeyboardInterrupt: 
2025-10-14 12:54:11,162 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:54:11,163 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:54:11,366 - aiogram.dispatcher - INFO - Polling stopped
2025-10-14 12:56:13,202 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-14 12:56:13,203 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-14 12:56:13,211 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-14 12:56:13,213 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-14 12:56:13,215 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-14 12:56:13,215 - apscheduler.scheduler - INFO - Scheduler started
2025-10-14 12:56:13,216 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-14 12:56:13,216 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-14 12:56:13,217 - aiogram.dispatcher - INFO - Start polling
2025-10-14 12:56:13,461 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:56:20,639 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-14 12:56:20,790 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:56:20,882 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å User(id='515084006', username='heavenyoung', chat_id='515084006', products=['1728110604', '1609078406', '2582743922']) –ø–æ–ª—É—á–µ–Ω –ø–æ id: 515084006
2025-10-14 12:56:20,883 - src.application.use_cases.create_user - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ
2025-10-14 12:56:20,883 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è create_user: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:56:20,885 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:20,885 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:20,886 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:56:20,886 - src.infrastructure.services.logger - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —Å–æ–∑–¥–∞–Ω –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 12:56:21,188 - aiogram.event - INFO - Update id=557185720 is handled. Duration 549 ms by bot id=5702092394
2025-10-14 12:56:22,833 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:56:22,834 - src.application.use_cases.get_products_for_user - INFO - –ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID: 515084006
2025-10-14 12:56:22,884 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-14 12:56:22,904 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥ (ID: 1609078406)
2025-10-14 12:56:22,918 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞ (ID: 2582743922)
2025-10-14 12:56:22,922 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-14 12:56:22,924 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:22,925 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:22,926 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:56:23,023 - aiogram.event - INFO - Update id=557185721 is handled. Duration 193 ms by bot id=5702092394
2025-10-14 12:56:24,614 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:56:24,625 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-14 12:56:24,631 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_full_product: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-14 12:56:24,633 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:24,634 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:56:24,635 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:56:24,724 - aiogram.event - INFO - Update id=557185722 is handled. Duration 176 ms by bot id=5702092394
2025-10-14 12:57:13,216 - apscheduler.executors.default - INFO - Running job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:58:13 MSK)" (scheduled at 2025-10-14 12:57:13.213273+03:00)
2025-10-14 12:57:13,217 - src.infrastructure.services.logger - INFO - üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω...
2025-10-14 12:57:13,217 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:57:13,219 - src.application.use_cases.get_user_products - INFO - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ APSchedulerService
2025-10-14 12:57:13,219 - src.infrastructure.database.repositories.user_products_repository - INFO - –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ {product_id:user_id} –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UserProductsRepositoryImpl
2025-10-14 12:57:13,224 - src.infrastructure.database.repositories.user_products_repository - INFO - Rows -> [<src.infrastructure.database.models.users_products.ORMUserProducts object at 0x0000018C4E634F30>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x0000018C4E634270>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x0000018C4E65DA50>]
2025-10-14 12:57:13,225 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {})
2025-10-14 12:57:13,226 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604']})
2025-10-14 12:57:13,226 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604', '1609078406']})
2025-10-14 12:57:13,226 - src.infrastructure.database.repositories.user_products_repository - INFO - –ó–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ (user_id: [product_id, product_id, ...]) –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
2025-10-14 12:57:13,227 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products_for_update: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-14 12:57:13,230 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:57:13,231 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:57:13,232 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:57:13,232 - src.infrastructure.services.logger - INFO - USERS_PRODUCTS –ü–û–õ–£–ß–ï–ù–´ {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:57:13,233 - src.infrastructure.services.logger - INFO - USER_PRODUCT_ITEMS: {'515084006': ['1728110604', '1609078406', '2582743922']}
2025-10-14 12:57:13,233 - src.infrastructure.services.logger - INFO - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 515084006
2025-10-14 12:57:13,234 - src.infrastructure.services.logger - INFO - –¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 515084006: ['1728110604', '1609078406', '2582743922']
2025-10-14 12:57:13,234 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1728110604
2025-10-14 12:57:13,235 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:57:13,252 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-14 12:57:14,832 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:57:14,833 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:57:15,354 - src.infrastructure.parsers.session_engine - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/: ('Connection aborted.', ConnectionResetError(10054, '–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', None, 10054, None))
2025-10-14 12:57:15,355 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/: ('Connection aborted.', ConnectionResetError(10054, '–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', None, 10054, None))
2025-10-14 12:57:15,355 - src.infrastructure.parsers.session_decorator - ERROR - –û—à–∏–±–∫–∞ –≤ –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏: ('Connection aborted.', ConnectionResetError(10054, '–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', None, 10054, None))
2025-10-14 12:57:17,394 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: KeyboardInterrupt: 
2025-10-14 12:57:17,397 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:57:17,398 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:57:17,410 - apscheduler.executors.default - ERROR - Job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 12:58:13 MSK)" raised an exception
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 565, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1430, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
ConnectionResetError: [WinError 10054] –£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_decorator.py", line 41, in wrapper
    result = func(self, session, *args, **kwargs)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\ozon_parser.py", line 34, in parse_product
    session.navigate(url)
    ~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_engine.py", line 93, in navigate
    self.driver.get(url)
    ~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 483, in get
    self.execute(Command.GET, {"url": url})
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 455, in execute
    response = cast(RemoteConnection, self.command_executor).execute(driver_command, params)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 406, in execute
    return self._request(command_info[0], url, body=data)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 430, in _request
    response = self._conn.request(method, url, body=body, headers=headers, timeout=self._client_config.timeout)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 143, in request
    return self.request_encode_body(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        method, url, fields=fields, headers=headers, **urlopen_kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 278, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\poolmanager.py", line 459, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\retry.py", line 474, in increment
    raise reraise(type(error), error, _stacktrace)
          ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 565, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1430, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(10054, '–£–¥–∞–ª–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ', None, 10054, None))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [WinError 10061] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç.–∫. –∫–æ–Ω–µ—á–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–≤–µ—Ä–≥ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\apscheduler\executors\base.py", line 181, in run_coroutine_job
    retval = await job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\services\scheduler_service.py", line 77, in run_price_update
    result = self.product_service.update_product_price(product_id)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\decorators.py", line 64, in wrapper
    result = func(self, *args, **kwargs) # –£–±—Ä–∞–ª –ø–µ—Ä–µ–¥–∞—á—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ uow
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\services\product_service.py", line 122, in update_product_price
    result_use_case_update_product = use_case_update_product.execute(
        product_id=product_id,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\application\use_cases\upd_product.py", line 65, in execute
    product_data = self.parser.parse_product(product.link)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_decorator.py", line 50, in wrapper
    session.quit()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_engine.py", line 111, in quit
    self.driver.quit()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\chromium\webdriver.py", line 219, in quit
    super().quit()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 616, in quit
    self.execute(Command.QUIT)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 455, in execute
    response = cast(RemoteConnection, self.command_executor).execute(driver_command, params)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 406, in execute
    return self._request(command_info[0], url, body=data)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 430, in _request
    response = self._conn.request(method, url, body=body, headers=headers, timeout=self._client_config.timeout)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 135, in request
    return self.request_encode_url(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<3 lines>...
        **urlopen_kw,
        ^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 182, in request_encode_url
    return self.urlopen(method, url, **extra_kw)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\poolmanager.py", line 459, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 81, in create_connection
    sock.close()
    ~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\socket.py", line 501, in close
    def close(self):
    
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt
2025-10-14 12:57:17,492 - aiogram.dispatcher - INFO - Polling stopped
2025-10-14 12:57:17,494 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: 
2025-10-14 12:57:17,775 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:59:21,189 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-14 12:59:21,191 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-14 12:59:21,199 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-14 12:59:21,200 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-14 12:59:21,202 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-14 12:59:21,203 - apscheduler.scheduler - INFO - Scheduler started
2025-10-14 12:59:21,203 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-14 12:59:21,204 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-14 12:59:21,204 - aiogram.dispatcher - INFO - Start polling
2025-10-14 12:59:21,411 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 12:59:29,503 - aiogram.event - INFO - Update id=557185723 is handled. Duration 300 ms by bot id=5702092394
2025-10-14 12:59:31,535 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-14 12:59:31,699 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 12:59:33,787 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 12:59:33,792 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 12:59:35,849 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 12:59:35,850 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 12:59:43,087 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∞—Ä—Ç–∏–∫—É–ª–∞: Message: invalid session id: session deleted as the browser has closed the connection
from disconnected: not connected to DevTools
  (Session info: chrome=141.0.7390.76); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d060f]
	(No symbol) [0x0x7ff7f98bc145]
	(No symbol) [0x0x7ff7f98e177a]
	(No symbol) [0x0x7ff7f9958b06]
	(No symbol) [0x0x7ff7f9978fa2]
	(No symbol) [0x0x7ff7f9951003]
	(No symbol) [0x0x7ff7f99195d1]
	(No symbol) [0x0x7ff7f991a3f3]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	GetHandleVerifier [0x0x7ff7f9b57b94+117460]
	GetHandleVerifier [0x0x7ff7f9b57d4f+117903]
	GetHandleVerifier [0x0x7ff7f9b3dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,308 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,312 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,316 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Å –∫–∞—Ä—Ç–æ–π: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,320 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã –±–µ–∑ –∫–∞—Ä—Ç—ã: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,324 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,330 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: Message: invalid session id; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#invalidsessionidexception
Stacktrace:
	GetHandleVerifier [0x0x7ff7f9b4e955+80021]
	GetHandleVerifier [0x0x7ff7f9b4e9b0+80112]
	(No symbol) [0x0x7ff7f98d0425]
	(No symbol) [0x0x7ff7f991864f]
	(No symbol) [0x0x7ff7f99510f2]
	(No symbol) [0x0x7ff7f994b89f]
	(No symbol) [0x0x7ff7f994a94a]
	(No symbol) [0x0x7ff7f989a765]
	GetHandleVerifier [0x0x7ff7f9e0dd0d+2960461]
	GetHandleVerifier [0x0x7ff7f9e07fca+2936586]
	GetHandleVerifier [0x0x7ff7f9e28a07+3070279]
	GetHandleVerifier [0x0x7ff7f9b6843e+185214]
	GetHandleVerifier [0x0x7ff7f9b6fe8f+216527]
	(No symbol) [0x0x7ff7f989970e]
	GetHandleVerifier [0x0x7ff7f9f46af8+4241976]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-14 12:59:43,331 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': None, 'name': None, 'rating': None, 'price_with_card': None, 'price_without_card': None, 'image_url': None, 'categories': []}
2025-10-14 12:59:44,666 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 12:59:44,667 - src.application.use_cases.create_product - INFO - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX: {'id': None, 'name': None, 'rating': None, 'price_with_card': None, 'price_without_card': None, 'image_url': None, 'categories': []} –∑–∞–≤–µ—Ä—à–µ–Ω.
2025-10-14 12:59:44,836 - src.infrastructure.database.repositories.product_repository - WARNING - –¢–æ–≤–∞—Ä —Å ID None –Ω–µ –Ω–∞–π–¥–µ–Ω
2025-10-14 12:59:44,849 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å User(id='515084006', username='heavenyoung', chat_id='515084006', products=['1728110604', '1609078406', '2582743922']) –ø–æ–ª—É—á–µ–Ω –ø–æ id: 515084006
2025-10-14 12:59:44,854 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω/–æ–±–Ω–æ–≤–ª–µ–Ω
2025-10-14 12:59:44,855 - src.infrastructure.database.repositories.product_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Product(id=None, user_id='515084006', name=None, link='https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', image_url=None, rating=None, categories=[], prices=[Price(id=None, product_id=None, with_card=None, without_card=None, previous_with_card=None, previous_without_card=None, created_at=datetime.datetime(2025, 10, 14, 12, 59, 44, 837561))])
2025-10-14 12:59:44,860 - src.infrastructure.database.repositories.price_repository - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: Price(id=None, product_id=None, with_card=None, without_card=None, previous_with_card=None, previous_without_card=None, created_at=datetime.datetime(2025, 10, 14, 12, 59, 44, 837561))
2025-10-14 12:59:44,860 - src.infrastructure.database.repositories.user_products_repository - INFO - –ü—Ä–∏–≤—è–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ ID None –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ID 515084006
2025-10-14 12:59:44,861 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è create_product: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 12:59:44,876 - src.core.uow - ERROR - Unit of Work: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω. –û—à–∏–±–∫–∞: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine..., null, null, {}, 2025-10-14 12:59:44.867161).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'image_url': None, 'rating': None, 'categories': [], 'created_at': datetime.datetime(2025, 10, 14, 12, 59, 44, 867161)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:59:44,877 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:59:44,877 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine..., null, null, {}, 2025-10-14 12:59:44.867161).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'image_url': None, 'rating': None, 'categories': [], 'created_at': datetime.datetime(2025, 10, 14, 12, 59, 44, 867161)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:59:44,878 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 12:59:44,879 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 12:59:44,879 - src.core.decorators - ERROR - –û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ create_product: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine..., null, null, {}, 2025-10-14 12:59:44.867161).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'image_url': None, 'rating': None, 'categories': [], 'created_at': datetime.datetime(2025, 10, 14, 12, 59, 44, 867161)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:59:44,880 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.NotNullViolation: null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine..., null, null, {}, 2025-10-14 12:59:44.867161).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\presentation\bot\handlers\products.py", line 34, in add_product_process
    result = product_service.create_product(str(message.from_user.id), url)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\decorators.py", line 71, in wrapper
    uow.commit()  # –Ø–≤–Ω—ã–π commit
    ~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\uow.py", line 124, in commit
    self._session.commit()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1413, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1635, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1840, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1980, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2349, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1961, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 944, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (null, null, https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine..., null, null, {}, 2025-10-14 12:59:44.867161).

[SQL: INSERT INTO products (name, link, image_url, rating, categories, created_at) VALUES (%(name)s, %(link)s, %(image_url)s, %(rating)s, %(categories)s, %(created_at)s)]
[parameters: {'name': None, 'link': 'https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX', 'image_url': None, 'rating': None, 'categories': [], 'created_at': datetime.datetime(2025, 10, 14, 12, 59, 44, 867161)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-14 12:59:45,067 - aiogram.event - INFO - Update id=557185724 is handled. Duration 13637 ms by bot id=5702092394
2025-10-14 12:59:55,094 - aiogram.dispatcher - INFO - Polling stopped
2025-10-14 12:59:55,096 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-10-14 12:59:55,096 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 5702092394)
2025-10-14 12:59:55,233 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 13:00:01,282 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-14 13:00:01,283 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-14 13:00:01,289 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-14 13:00:01,291 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-14 13:00:01,292 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-14 13:00:01,292 - apscheduler.scheduler - INFO - Scheduler started
2025-10-14 13:00:01,293 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-14 13:00:01,293 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-14 13:00:01,294 - aiogram.dispatcher - INFO - Start polling
2025-10-14 13:00:01,535 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-14 13:00:53,093 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-14 13:00:53,282 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 13:00:53,391 - src.infrastructure.database.repositories.user_repository - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å User(id='515084006', username='heavenyoung', chat_id='515084006', products=['1728110604', '1609078406', '2582743922']) –ø–æ–ª—É—á–µ–Ω –ø–æ id: 515084006
2025-10-14 13:00:53,392 - src.application.use_cases.create_user - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ
2025-10-14 13:00:53,392 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è create_user: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-14 13:00:53,394 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 13:00:53,395 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 13:00:53,396 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 13:00:53,396 - src.infrastructure.services.logger - INFO - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 515084006 —Å–æ–∑–¥–∞–Ω –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 13:00:53,615 - aiogram.event - INFO - Update id=557185725 is handled. Duration 523 ms by bot id=5702092394
2025-10-14 13:00:55,018 - aiogram.event - INFO - Update id=557185726 is handled. Duration 184 ms by bot id=5702092394
2025-10-14 13:00:59,788 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-14 13:01:01,515 - src.infrastructure.parsers.session_engine - INFO - Stealth-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
2025-10-14 13:01:01,516 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-14 13:01:02,482 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 13:01:02,483 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX
2025-10-14 13:01:08,779 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 2582743922
2025-10-14 13:01:09,027 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞
2025-10-14 13:01:09,250 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 5.0
2025-10-14 13:01:09,555 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 593
2025-10-14 13:01:09,786 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 661
2025-10-14 13:01:09,904 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-0/wc1000/8056672128.jpg
2025-10-14 13:01:10,547 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö', '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', '–ö—Ä–µ–∞—Ç–∏–Ω—ã', 'vitmins']
2025-10-14 13:01:10,548 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'rating': 5.0, 'price_with_card': 593, 'price_without_card': 661, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-0/wc1000/8056672128.jpg', 'categories': ['–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö', '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', '–ö—Ä–µ–∞—Ç–∏–Ω—ã', 'vitmins']}
2025-10-14 13:01:12,742 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-14 13:01:12,742 - src.application.use_cases.create_product - INFO - –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è https://www.ozon.ru/product/kreatin-monogidrat-poroshok-creatine-300-g-so-vkusom-apelsina-2582743922/?at=QktJOZoRMcGxm1y6fQzGplGSDkRXZXfZq63jrsEkxYDX: {'id': '2582743922', 'name': '–ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞', 'rating': 5.0, 'price_with_card': 593, 'price_without_card': 661, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-0/wc1000/8056672128.jpg', 'categories': ['–°–ø–æ—Ä—Ç –∏ –æ—Ç–¥—ã—Ö', '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ', '–ö—Ä–µ–∞—Ç–∏–Ω—ã', 'vitmins']} –∑–∞–≤–µ—Ä—à–µ–Ω.
2025-10-14 13:01:12,764 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω —Ç–æ–≤–∞—Ä: –ö—Ä–µ–∞—Ç–∏–Ω –º–æ–Ω–æ–≥–∏–¥—Ä–∞—Ç –ø–æ—Ä–æ—à–æ–∫ creatine 300 –≥, —Å–æ –≤–∫—É—Å–æ–º –∞–ø–µ–ª—å—Å–∏–Ω–∞ (ID: 2582743922)
2025-10-14 13:01:12,764 - src.application.use_cases.create_product - ERROR - –¢–æ–≤–∞—Ä —Å ID 2582743922 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 13:01:12,765 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: ProductCreationError: –¢–æ–≤–∞—Ä —Å ID 2582743922 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 13:01:12,768 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-14 13:01:12,769 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-14 13:01:12,769 - src.core.decorators - ERROR - –û—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ create_product: –¢–æ–≤–∞—Ä —Å ID 2582743922 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 13:01:12,770 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\presentation\bot\handlers\products.py", line 34, in add_product_process
    result = product_service.create_product(str(message.from_user.id), url)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\decorators.py", line 64, in wrapper
    result = func(self, *args, **kwargs) # –£–±—Ä–∞–ª –ø–µ—Ä–µ–¥–∞—á—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ uow
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\services\product_service.py", line 47, in create_product
    return use_case.execute(user_id, url)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\application\use_cases\create_product.py", line 75, in execute
    raise ProductCreationError(f'–¢–æ–≤–∞—Ä —Å ID {product_data["id"]} —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
src.domain.exceptions.ProductCreationError: –¢–æ–≤–∞—Ä —Å ID 2582743922 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2025-10-14 13:01:12,786 - apscheduler.executors.default - WARNING - Run time of job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-14 13:02:01 MSK)" was missed by 0:00:11.495713
2025-10-14 13:01:12,895 - aiogram.event - INFO - Update id=557185727 is handled. Duration 13205 ms by bot id=5702092394
2025-10-14 13:01:21,358 - aiogram.dispatcher - INFO - Polling stopped
2025-10-14 13:01:21,360 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-10-14 13:01:21,361 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 5702092394)
2025-10-14 13:01:21,515 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
