2025-10-13 16:36:51,055 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-13 16:36:51,057 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-13 16:36:51,063 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-13 16:36:51,064 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-13 16:36:51,066 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-13 16:36:51,066 - apscheduler.scheduler - INFO - Scheduler started
2025-10-13 16:36:51,066 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-13 16:36:51,066 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-13 16:36:51,067 - aiogram.dispatcher - INFO - Start polling
2025-10-13 16:36:51,272 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-13 16:37:51,082 - apscheduler.executors.default - INFO - Running job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-13 16:38:51 MSK)" (scheduled at 2025-10-13 16:37:51.064662+03:00)
2025-10-13 16:37:51,083 - src.infrastructure.services.logger - INFO - üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω...
2025-10-13 16:37:51,084 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-13 16:37:51,195 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-13 16:37:51,195 - src.application.use_cases.get_user_products - INFO - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞  APSchedulerService
2025-10-13 16:37:51,195 - src.infrastructure.database.repositories.user_products_repository - INFO - –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ {product_id:user_id} –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UserProductsRepositoryImpl
2025-10-13 16:37:51,288 - src.infrastructure.database.repositories.user_products_repository - INFO - Rows -> [<src.infrastructure.database.models.users_products.ORMUserProducts object at 0x0000026386ACF380>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x0000026386A96990>]
2025-10-13 16:37:51,289 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {})
2025-10-13 16:37:51,289 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604']})
2025-10-13 16:37:51,290 - src.infrastructure.database.repositories.user_products_repository - INFO - –ó–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ (user_id: [product_id, product_id, ...]) –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
2025-10-13 16:37:51,290 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products_for_update: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-13 16:37:51,292 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:37:51,293 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:37:51,293 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-13 16:37:51,293 - src.infrastructure.services.logger - INFO - USERS_PRODUCTS –ü–û–õ–£–ß–ï–ù–´ {'515084006': ['1728110604', '1609078406']}
2025-10-13 16:37:51,294 - src.infrastructure.services.logger - INFO - USER_PRODUCT_ITEMS: {'515084006': ['1728110604', '1609078406']}
2025-10-13 16:37:51,294 - src.infrastructure.services.logger - INFO - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 515084006
2025-10-13 16:37:51,294 - src.infrastructure.services.logger - INFO - –¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 515084006: ['1728110604', '1609078406']
2025-10-13 16:37:51,295 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1728110604
2025-10-13 16:37:51,295 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-13 16:37:51,320 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω –¢–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-13 16:37:52,957 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-13 16:38:04,097 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-13 16:38:04,097 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-13 16:38:14,395 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∞—Ä—Ç–∏–∫—É–ª–∞: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff6b99ae955+80021]
	GetHandleVerifier [0x0x7ff6b99ae9b0+80112]
	(No symbol) [0x0x7ff6b973060f]
	(No symbol) [0x0x7ff6b9788854]
	(No symbol) [0x0x7ff6b9788b1c]
	(No symbol) [0x0x7ff6b97dc927]
	(No symbol) [0x0x7ff6b97b126f]
	(No symbol) [0x0x7ff6b97d968a]
	(No symbol) [0x0x7ff6b97b1003]
	(No symbol) [0x0x7ff6b97795d1]
	(No symbol) [0x0x7ff6b977a3f3]
	GetHandleVerifier [0x0x7ff6b9c6dd0d+2960461]
	GetHandleVerifier [0x0x7ff6b9c67fca+2936586]
	GetHandleVerifier [0x0x7ff6b9c88a07+3070279]
	GetHandleVerifier [0x0x7ff6b99c843e+185214]
	GetHandleVerifier [0x0x7ff6b99cfe8f+216527]
	GetHandleVerifier [0x0x7ff6b99b7b94+117460]
	GetHandleVerifier [0x0x7ff6b99b7d4f+117903]
	GetHandleVerifier [0x0x7ff6b999dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-13 16:38:24,640 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff6b99ae955+80021]
	GetHandleVerifier [0x0x7ff6b99ae9b0+80112]
	(No symbol) [0x0x7ff6b973060f]
	(No symbol) [0x0x7ff6b9788854]
	(No symbol) [0x0x7ff6b9788b1c]
	(No symbol) [0x0x7ff6b97dc927]
	(No symbol) [0x0x7ff6b97b126f]
	(No symbol) [0x0x7ff6b97d968a]
	(No symbol) [0x0x7ff6b97b1003]
	(No symbol) [0x0x7ff6b97795d1]
	(No symbol) [0x0x7ff6b977a3f3]
	GetHandleVerifier [0x0x7ff6b9c6dd0d+2960461]
	GetHandleVerifier [0x0x7ff6b9c67fca+2936586]
	GetHandleVerifier [0x0x7ff6b9c88a07+3070279]
	GetHandleVerifier [0x0x7ff6b99c843e+185214]
	GetHandleVerifier [0x0x7ff6b99cfe8f+216527]
	GetHandleVerifier [0x0x7ff6b99b7b94+117460]
	GetHandleVerifier [0x0x7ff6b99b7d4f+117903]
	GetHandleVerifier [0x0x7ff6b999dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-13 16:38:34,893 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff6b99ae955+80021]
	GetHandleVerifier [0x0x7ff6b99ae9b0+80112]
	(No symbol) [0x0x7ff6b973060f]
	(No symbol) [0x0x7ff6b9788854]
	(No symbol) [0x0x7ff6b9788b1c]
	(No symbol) [0x0x7ff6b97dc927]
	(No symbol) [0x0x7ff6b97b126f]
	(No symbol) [0x0x7ff6b97d968a]
	(No symbol) [0x0x7ff6b97b1003]
	(No symbol) [0x0x7ff6b97795d1]
	(No symbol) [0x0x7ff6b977a3f3]
	GetHandleVerifier [0x0x7ff6b9c6dd0d+2960461]
	GetHandleVerifier [0x0x7ff6b9c67fca+2936586]
	GetHandleVerifier [0x0x7ff6b9c88a07+3070279]
	GetHandleVerifier [0x0x7ff6b99c843e+185214]
	GetHandleVerifier [0x0x7ff6b99cfe8f+216527]
	GetHandleVerifier [0x0x7ff6b99b7b94+117460]
	GetHandleVerifier [0x0x7ff6b99b7d4f+117903]
	GetHandleVerifier [0x0x7ff6b999dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-13 16:38:45,173 - src.infrastructure.parsers.ozon_parser - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ü–µ–Ω—ã —Å –∫–∞—Ä—Ç–æ–π: Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff6b99ae955+80021]
	GetHandleVerifier [0x0x7ff6b99ae9b0+80112]
	(No symbol) [0x0x7ff6b973060f]
	(No symbol) [0x0x7ff6b9788854]
	(No symbol) [0x0x7ff6b9788b1c]
	(No symbol) [0x0x7ff6b97dc927]
	(No symbol) [0x0x7ff6b97b126f]
	(No symbol) [0x0x7ff6b97d968a]
	(No symbol) [0x0x7ff6b97b1003]
	(No symbol) [0x0x7ff6b97795d1]
	(No symbol) [0x0x7ff6b977a3f3]
	GetHandleVerifier [0x0x7ff6b9c6dd0d+2960461]
	GetHandleVerifier [0x0x7ff6b9c67fca+2936586]
	GetHandleVerifier [0x0x7ff6b9c88a07+3070279]
	GetHandleVerifier [0x0x7ff6b99c843e+185214]
	GetHandleVerifier [0x0x7ff6b99cfe8f+216527]
	GetHandleVerifier [0x0x7ff6b99b7b94+117460]
	GetHandleVerifier [0x0x7ff6b99b7d4f+117903]
	GetHandleVerifier [0x0x7ff6b999dc28+11112]
	BaseThreadInitThunk [0x0x7ffd986de8d7+23]
	RtlUserThreadStart [0x0x7ffd99068d9c+44]

2025-10-13 16:38:49,756 - src.core.uow - WARNING - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ Unit of Work: KeyboardInterrupt: 
2025-10-13 16:38:49,758 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:38:49,759 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-13 16:38:49,785 - apscheduler.executors.default - ERROR - Job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-13 16:38:51 MSK)" raised an exception
Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [WinError 10061] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç.–∫. –∫–æ–Ω–µ—á–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–≤–µ—Ä–≥ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_decorator.py", line 35, in wrapper
    result = func(self, session, *args, **kwargs)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\ozon_parser.py", line 35, in parse_product
    'price_without_card': self._extract_price_without_card(session),
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\ozon_parser.py", line 91, in _extract_price_without_card
    element_obj = WebDriverWait(session.driver, session.wait_time).until(
        EC.visibility_of_element_located((By.XPATH, "//span[contains(text(),'‚ÇΩ') and contains(@class,'tsHeadline500Medium')]"))
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\support\wait.py", line 129, in until
    value = method(self._driver)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\support\expected_conditions.py", line 217, in _predicate
    return _element_if_visible(driver.find_element(*locator))
                               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 926, in find_element
    return self.execute(Command.FIND_ELEMENT, {"using": by, "value": value})["value"]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 455, in execute
    response = cast(RemoteConnection, self.command_executor).execute(driver_command, params)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 406, in execute
    return self._request(command_info[0], url, body=data)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 430, in _request
    response = self._conn.request(method, url, body=body, headers=headers, timeout=self._client_config.timeout)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 143, in request
    return self.request_encode_body(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        method, url, fields=fields, headers=headers, **urlopen_kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 278, in request_encode_body
    return self.urlopen(method, url, **extra_kw)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\poolmanager.py", line 459, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 81, in create_connection
    sock.close()
    ~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\socket.py", line 501, in close
    def close(self):
    
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
ConnectionRefusedError: [WinError 10061] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —Ç.–∫. –∫–æ–Ω–µ—á–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä –æ—Ç–≤–µ—Ä–≥ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\apscheduler\executors\base.py", line 181, in run_coroutine_job
    retval = await job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\services\scheduler_service.py", line 78, in run_price_update
    result = self.product_service.update_product_price(product_id)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\core\decorators.py", line 64, in wrapper
    result = func(self, *args, **kwargs) # –£–±—Ä–∞–ª –ø–µ—Ä–µ–¥–∞—á—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ uow
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\services\product_service.py", line 126, in update_product_price
    result_use_case_update_product = use_case_update_product.execute(
        product_id=product_id,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\application\use_cases\upd_product.py", line 44, in execute
    product_data = self.parser.parse_product(product.link)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_decorator.py", line 42, in wrapper
    session.quit()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\src\infrastructure\parsers\session_engine.py", line 99, in quit
    self.driver.quit()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\chromium\webdriver.py", line 219, in quit
    super().quit()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 616, in quit
    self.execute(Command.QUIT)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\webdriver.py", line 455, in execute
    response = cast(RemoteConnection, self.command_executor).execute(driver_command, params)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 406, in execute
    return self._request(command_info[0], url, body=data)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\selenium\webdriver\remote\remote_connection.py", line 430, in _request
    response = self._conn.request(method, url, body=body, headers=headers, timeout=self._client_config.timeout)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 135, in request
    return self.request_encode_url(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<3 lines>...
        **urlopen_kw,
        ^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\_request_methods.py", line 182, in request_encode_url
    return self.urlopen(method, url, **extra_kw)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\poolmanager.py", line 459, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
    ~~~~~~~~~~~~^
        method,
        ^^^^^^^
    ...<6 lines>...
        enforce_content_length=enforce_content_length,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 494, in request
    self.endheaders()
    ~~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1093, in _send_output
    self.send(msg)
    ~~~~~~~~~^^^^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\http\client.py", line 1037, in send
    self.connect()
    ~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 325, in connect
    self.sock = self._new_conn()
                ~~~~~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
        (self._dns_host, self.port),
    ...<2 lines>...
        socket_options=self.socket_options,
    )
  File "C:\Users\Mefyod-EA\Documents\my_projects\pricely\.venv\Lib\site-packages\urllib3\util\connection.py", line 81, in create_connection
    sock.close()
    ~~~~~~~~~~^^
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\socket.py", line 501, in close
    def close(self):
    
  File "C:\Users\Mefyod-EA\AppData\Roaming\uv\python\cpython-3.13.3-windows-x86_64-none\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt
2025-10-13 16:38:49,824 - aiogram.dispatcher - INFO - Polling stopped
2025-10-13 16:38:49,824 - src.infrastructure.services.logger - ERROR - –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: 
2025-10-13 16:38:50,080 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-13 16:38:50,253 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000026386A96AD0>
2025-10-13 16:38:56,222 - src.infrastructure.services.logger - INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
2025-10-13 16:38:56,225 - src.infrastructure.services.logger - INFO - –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.
2025-10-13 16:38:56,232 - src.infrastructure.services.logger - INFO - üìç Scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç event loop: <ProactorEventLoop running=True closed=False debug=False>
2025-10-13 16:38:56,234 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-10-13 16:38:56,237 - apscheduler.scheduler - INFO - Added job "APSchedulerService.run_price_update" to job store "default"
2025-10-13 16:38:56,237 - apscheduler.scheduler - INFO - Scheduler started
2025-10-13 16:38:56,238 - src.infrastructure.services.logger - INFO - üîÅ APScheduler –∑–∞–ø—É—â–µ–Ω (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 1 –º–∏–Ω).
2025-10-13 16:38:56,238 - src.infrastructure.services.logger - INFO - ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!
2025-10-13 16:38:56,239 - aiogram.dispatcher - INFO - Start polling
2025-10-13 16:38:56,433 - aiogram.dispatcher - INFO - Run polling for bot @heavenyoung_testbot id=5702092394 - 'testtest'
2025-10-13 16:39:56,247 - apscheduler.executors.default - INFO - Running job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-13 16:40:56 MSK)" (scheduled at 2025-10-13 16:39:56.234564+03:00)
2025-10-13 16:39:56,248 - src.infrastructure.services.logger - INFO - üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω...
2025-10-13 16:39:56,249 - src.core.db_connection - INFO - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: postgresql+psycopg2://postgres:1234@192.168.175.129:5432/pricely_db
2025-10-13 16:39:56,384 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-13 16:39:56,385 - src.application.use_cases.get_user_products - INFO - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞  APSchedulerService
2025-10-13 16:39:56,385 - src.infrastructure.database.repositories.user_products_repository - INFO - –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ {product_id:user_id} –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UserProductsRepositoryImpl
2025-10-13 16:39:56,496 - src.infrastructure.database.repositories.user_products_repository - INFO - Rows -> [<src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002DB2416F620>, <src.infrastructure.database.models.users_products.ORMUserProducts object at 0x000002DB24152990>]
2025-10-13 16:39:56,497 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {})
2025-10-13 16:39:56,498 - src.infrastructure.database.repositories.user_products_repository - INFO - user_products Iteration -> defaultdict(<class 'list'>, {'515084006': ['1728110604']})
2025-10-13 16:39:56,499 - src.infrastructure.database.repositories.user_products_repository - INFO - –ó–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ (user_id: [product_id, product_id, ...]) –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
2025-10-13 16:39:56,499 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è get_all_products_for_update: commit –ø—Ä–æ–ø—É—â–µ–Ω, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è rollback
2025-10-13 16:39:56,504 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—á–µ–Ω–∞, rollback –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:39:56,505 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:39:56,506 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-13 16:39:56,506 - src.infrastructure.services.logger - INFO - USERS_PRODUCTS –ü–û–õ–£–ß–ï–ù–´ {'515084006': ['1728110604', '1609078406']}
2025-10-13 16:39:56,507 - src.infrastructure.services.logger - INFO - USER_PRODUCT_ITEMS: {'515084006': ['1728110604', '1609078406']}
2025-10-13 16:39:56,507 - src.infrastructure.services.logger - INFO - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 515084006
2025-10-13 16:39:56,508 - src.infrastructure.services.logger - INFO - –¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 515084006: ['1728110604', '1609078406']
2025-10-13 16:39:56,509 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1728110604
2025-10-13 16:39:56,509 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-13 16:39:56,547 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω –¢–æ–≤–∞—Ä: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π (ID: 1728110604)
2025-10-13 16:39:58,338 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-13 16:40:09,325 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-13 16:40:09,326 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/
2025-10-13 16:40:09,729 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 1728110604
2025-10-13 16:40:09,959 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π
2025-10-13 16:40:10,158 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 4.8
2025-10-13 16:40:10,458 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830
2025-10-13 16:40:11,269 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 15990
2025-10-13 16:40:13,285 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-8/wc1000/7922729852.jpg
2025-10-13 16:40:14,044 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Xiaomi']
2025-10-13 16:40:14,045 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'rating': 4.8, 'price_with_card': 15830, 'price_without_card': 15990, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-8/wc1000/7922729852.jpg', 'categories': ['–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞', '–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–æ–º–∞', '–ü—ã–ª–µ—Å–æ—Å—ã', '–†–æ–±–æ—Ç—ã-–ø—ã–ª–µ—Å–æ—Å—ã', 'Xiaomi']}
2025-10-13 16:40:16,269 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-13 16:40:16,269 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 15830
2025-10-13 16:40:16,270 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductUseCase {'is_changed': False, 'product_data': {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}}
2025-10-13 16:40:16,270 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-13 16:40:16,272 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:40:16,273 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:40:16,273 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-13 16:40:16,273 - src.infrastructure.services.logger - INFO - –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ Scheduler –ø–µ—Ä–µ–¥–∞–Ω result: {'updated_product': {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}, 'is_changed': True}
2025-10-13 16:40:16,274 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù UPDATED_PRODUCT: {'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}
2025-10-13 16:40:16,275 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù –§–õ–ê–ì is_changed: True
2025-10-13 16:40:16,275 - src.infrastructure.services.logger - INFO - –ü–æ–ª—É—á–∞–µ–º —Ç–æ–≤–∞—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ID=1609078406
2025-10-13 16:40:16,275 - src.core.uow - INFO - Unit of Work –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Å—Å–∏–µ–π –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏
2025-10-13 16:40:16,286 - src.infrastructure.database.repositories.product_repository - INFO - –ù–∞–π–¥–µ–Ω –¢–æ–≤–∞—Ä: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥ (ID: 1609078406)
2025-10-13 16:40:17,890 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.
2025-10-13 16:40:28,859 - src.infrastructure.parsers.session_engine - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw
2025-10-13 16:40:28,860 - src.infrastructure.parsers.ozon_parser - INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw
2025-10-13 16:40:30,058 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω –∞—Ä—Ç–∏–∫—É–ª: 1609078406
2025-10-13 16:40:30,143 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥
2025-10-13 16:40:30,227 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥: 4.9
2025-10-13 16:40:30,304 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164
2025-10-13 16:40:30,376 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –∫–∞—Ä—Ç—ã: 6290
2025-10-13 16:40:30,435 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://ir.ozone.ru/s3/multimedia-1-b/wc1000/7494502547.jpg
2025-10-13 16:40:30,607 - src.infrastructure.parsers.ozon_parser - INFO - –ù–∞–π–¥–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–ò–≥—Ä—ã –∏ –∫–æ–Ω—Å–æ–ª–∏', 'Xbox', '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', 'Microsoft']
2025-10-13 16:40:30,608 - src.infrastructure.parsers.ozon_parser - INFO - –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–æ–º: {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'rating': 4.9, 'price_with_card': 6164, 'price_without_card': 6290, 'image_url': 'https://ir.ozone.ru/s3/multimedia-1-b/wc1000/7494502547.jpg', 'categories': ['–ò–≥—Ä—ã –∏ –∫–æ–Ω—Å–æ–ª–∏', 'Xbox', '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', 'Microsoft']}
2025-10-13 16:40:32,444 - src.infrastructure.parsers.session_engine - INFO - WebDriver —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç.
2025-10-13 16:40:32,445 - src.application.use_cases.upd_product - INFO - –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164, –Ω–æ–≤–∞—è —Ü–µ–Ω–∞ —Å –∫–∞—Ä—Ç–æ–π: 6164
2025-10-13 16:40:32,446 - src.application.use_cases.upd_product - INFO - –î–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ UpdateProductUseCase {'is_changed': False, 'product_data': {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}}
2025-10-13 16:40:32,446 - src.core.decorators - INFO - –§—É–Ω–∫—Ü–∏—è update_product_price: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è commit —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2025-10-13 16:40:32,448 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:40:32,449 - src.core.uow - INFO - Unit of Work: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞, commit –≤—ã–ø–æ–ª–Ω–µ–Ω
2025-10-13 16:40:32,450 - src.core.uow - INFO - Unit of Work –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É, —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞
2025-10-13 16:40:32,450 - src.infrastructure.services.logger - INFO - –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –≤ Scheduler –ø–µ—Ä–µ–¥–∞–Ω result: {'updated_product': {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}, 'is_changed': True}
2025-10-13 16:40:32,451 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù UPDATED_PRODUCT: {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}
2025-10-13 16:40:32,452 - src.infrastructure.services.logger - INFO - –ü–û–õ–£–ß–ï–ù –§–õ–ê–ì is_changed: True
2025-10-13 16:40:32,452 - src.infrastructure.services.logger - INFO - ‚ö†Ô∏è  –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é [{'id': '1728110604', 'name': 'Xiaomi S20 EU (BHR8629EU) –†–æ–±–æ—Ç-–ø—ã–ª–µ—Å–æ—Å, —Å—É—Ö–∞—è –∏ –≤–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞, –±–µ–ª—ã–π', 'link': 'https://www.ozon.ru/product/xiaomi-s20-eu-bhr8629eu-robot-pylesos-suhaya-i-vlazhnaya-uborka-belyy-1728110604/', 'with_card': 15830, 'without_card': 15990, 'previous_price_with_card': 15830, 'previous_price_without_card': 15990}, {'id': '1609078406', 'name': 'Microsoft Xbox Velocity Green –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –≥–µ–π–º–ø–∞–¥', 'link': 'https://www.ozon.ru/product/microsoft-xbox-velocity-green-besprovodnoy-geympad-1609078406/?at=79tnlGpLxu1vJl3kfKqn3gQfp3n2WlSJABkyip72WYw&sh=5GPvD58cXw', 'with_card': 6164, 'without_card': 6290, 'previous_price_with_card': 6164, 'previous_price_without_card': 6290}]
2025-10-13 16:40:32,453 - src.infrastructure.services.notification_service - INFO - üì® NotificationService: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 515084006
2025-10-13 16:40:32,454 - src.infrastructure.services.notification_service - INFO - üìù –¢–µ–∫—Å—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω: üîî –¶–µ–Ω—ã –Ω–∞ 2 —Ç–æ–≤–∞—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å!

üìà üì¶ [*Xiaomi S20 E...
2025-10-13 16:40:32,761 - src.infrastructure.services.notification_service - INFO - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ ID 1764 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 515084006
2025-10-13 16:40:32,762 - src.infrastructure.services.logger - INFO - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–æ.
2025-10-13 16:40:32,762 - apscheduler.executors.default - INFO - Job "APSchedulerService.run_price_update (trigger: interval[0:01:00], next run at: 2025-10-13 16:40:56 MSK)" executed successfully
2025-10-13 16:40:32,763 - src.infrastructure.services.logger - INFO - ‚úÖ ShedulerService –≤—ã–ø–æ–ª–Ω–∏–ª –∑–∞–¥–∞—á—É —É—Å–ø–µ—à–Ω–æ.
2025-10-13 16:40:36,911 - aiogram.dispatcher - INFO - Polling stopped
2025-10-13 16:40:36,914 - aiogram.dispatcher - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-10-13 16:40:36,914 - aiogram.dispatcher - WARNING - Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 5702092394)
2025-10-13 16:40:37,064 - aiogram.dispatcher - INFO - Polling stopped for bot @heavenyoung_testbot id=5702092394 - 'testtest'
